//***MULTI-PART
//kj0U8ZfQ5x
//LOGICAL-PATH:games/audio/Assets.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.audio.Assets",$singleton:!0,$constructor:function(){return["soundGenerator.png"]}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/audio/AudioLoader.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.audio.AudioLoader",$extends:"games.common.BaseObject",$dependencies:["games.common.input.MouseRecorder","games.shoot.engine.ExtendedEngine","games.common.clock.EngineClock","games.audio.entity.SoundGenerator","games.common.asset.AssetManager","games.audio.Assets"],$statics:{MOUSELEFT:"MOUSE_0",MOUSERIGHT:"MOUSE_2"},$constructor:function(a){var b;return this.$BaseObject.constructor.call(this),this.gameContainer=document.getElementById(a),b=this.createContext(),this.inputRecorder=new this.$MouseRecorder,this.inputRecorder.start(),this.engine=this.$ExtendedEngine.getDefaultImplementation(b),this.engineClock=this.$EngineClock.getDefaultImplementation(this.engine),this.engine.addController(this),games.shoot.AssetManager=this.$AssetManager.getDefaultImplementation(),games.shoot.AssetManager.setRootFolder("resources/img/"),this.assetManager=games.shoot.AssetManager,this.assetManager.queueDownloads(this.$Assets),this.assetManager.download({fn:function(){return this.engineClock.start()},scope:this})},$prototype:{update:function(a){var b;this.inputRecorder.update(),b=this.inputRecorder.getInputByCode(this.MOUSELEFT);if(b!=null?b.isCompleted():void 0)return this.onLeftClick(b)},onLeftClick:function(a){var b,c,d,e;return e=this.translateCoordinates(a.getX(),a.getY()),c=e[0],d=e[1],b=new this.$SoundGenerator(c,d),this.engine.addEntity(b),console.log("X : '"+c+"' and Y : '"+d+"'")},translateCoordinates:function(a,b){var c,d;return c=this.gameContainer.getBoundingClientRect().left,d=this.gameContainer.getBoundingClientRect().top,[a-c,b-d]},createContext:function(){var a,b;return a=document.createElement("canvas"),a.width=480,a.height=640,b=document.createElement("div"),b.className="canvasContainer",b.appendChild(a),this.gameContainer.appendChild(b),a.getContext("2d")}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/audio/entity/SoundGenerator.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.audio.entity.SoundGenerator",$extends:"games.common.entity.DestroyableEntity",$dependencies:["games.common.sprite.Sprite","games.common.sprite.SpriteBuilder"],$constructor:function(a,b){var c;return this.x=a,this.y=b,this.$DestroyableEntity.constructor.call(this),c={angle:-Math.PI/2,scale:{x:1,y:1}},this.x>240&&(c.scale.x=-1),this.sprite=this.$SpriteBuilder.build("soundGenerator.png",c),this},$prototype:{draw:function(a){return this.sprite.draw(this.x,this.y,a)}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/animation/Animation.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.common.animation.Animation",$extends:"games.common.BaseObject",$constructor:function(a,b,c,d){return this.$BaseObject.constructor.call(this),this.__image=a,this.__frameWidth=b,this.__frameDuration=c,this.__frameHeight=a.height,this.__totalTime=a.width/b*c,this.__elapsedTime=0,this.scale=d||1},$prototype:{update:function(a){return this.__elapsedTime+=a},draw:function(a,b,c){var d,e,f;return d=this.getCurrentFrame(),e=b-this.__frameWidth/2*this.scale,f=c-this.__frameHeight/2*this.scale,a.drawImage(this.__image,d*this.__frameWidth,0,this.__frameWidth,this.__frameHeight,e,f,this.__frameWidth*this.scale,this.__frameHeight*this.scale)},isFinished:function(){return this.__elapsedTime>=this.__totalTime},getCurrentFrame:function(){return Math.floor(this.__elapsedTime/this.__frameDuration)}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/assert/Assert.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.assert.Assert",$dependencies:["aria.utils.Type"],$singleton:!0,$constructor:function(){this.$Type=aria.utils.Type},$prototype:{isInstanceOf:function(a,b,c){typeof b!="string"&&(b=this.__resolveClasspath(b));var d=this.$Type.isInstanceOf(a,b),e=this.__isImplementationOf(a,b);return this.assert(d||e,a,c)},__isImplementationOf:function(a,b){return a&&a.$interfaces&&typeof a.$interfaces[b]=="function"},__resolveClasspath:function(a){if(a&&a.classDefinition)return a.classDefinition.$classpath;if(a&&a.interfaceDefinition)return a.interfaceDefinition.$classpath},isString:function(a,b){return this.assert(this.$Type.isString(a),a,b)},isNumber:function(a,b){return this.assert(this.$Type.isNumber(a),a,b)},isArray:function(a,b){return this.assert(this.$Type.isArray(a),a,b)},isObject:function(a,b){return this.assert(this.$Type.isObject(a),a,b)},isArrayOf:function(a,b,c){this.assert(this.$Type.isArray(a),a,c);for(var d=0;d<a.length;d++)this.isInstanceOf(a[d],b,c);return a},isNotString:function(a,b){return this.assert(!this.$Type.isString(a),a,b)},isNotBlank:function(a,b){var c=this.$Type.isString(a)&&a!="";return this.assert(c,a,b)},isTrue:function(a,b){return this.assert(a,!0,b)},isNotNull:function(a,b){return this.assert(a!==null,a,b)},isNotUndefined:function(a,b){return this.assert(typeof a!="undefined",a,b)},isNotNullNorUndefined:function(a,b){return notNullNorUndefined=typeof a!="undefined"&&a!==null,this.assert(notNullNorUndefined,a,b)},assert:function(a,b,c){if(a===!0)return b;var d=arguments.callee.caller,e=0;while(d&&e<5)console.log(d+""),d=d.caller,e++;throw new Error(c)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/asset/AssetLoader.js
//kj0U8ZfQ5x
(function(){}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/asset/AssetManager.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.asset.AssetManager",$extends:"games.common.BaseObject",$dependencies:["games.common.asset.ImageDownloader","games.common.assert.Assert"],$events:{assetLoaded:"assetLoaded"},$statics:{getDefaultImplementation:function(){var a=new games.common.asset.ImageDownloader;return new games.common.asset.AssetManager(a)}},$constructor:function(a){this.$BaseObject.constructor.call(this),this.__downloadQueue=[],this.__cache={},this.__successCount=this.__errorCount=0,this.__imageDownloader=this.$Assert.isInstanceOf(a,this.$ImageDownloader),this.__rootFolder=""},$prototype:{getAsset:function(a){return a=this.__getCompleteUrl(a),this.__cache[a]||(this.__cache[a]=this.__downloadImage(a,function(){})),this.__cache[a]},queueDownload:function(a){this.__downloadQueue.push(this.__getCompleteUrl(a))},queueDownloads:function(a){for(var b=0;b<a.length;b++)this.queueDownload(a[b])},download:function(a){this.__downloadQueue.length===0&&this.$callback(a);for(var b=0;b<this.__downloadQueue.length;b++){var c=this.__downloadQueue[b];this.__cache[c]=this.__downloadImage(c,a)}},getDowloadMethod:function(a,b){var c=this.__downloadQueue[a],d=this;return function(){d.__cache[c]=d.__downloadImage(c,b)}},setRootFolder:function(a){this.__rootFolder=a},__onDownloadSuccess:function(a,b){this.__successCount+=1,this.__isFinished()&&this.$callback(b),this.$raiseEvent({name:"assetLoaded",successCount:this.__successCount,total:this.__downloadQueue.length})},__onDownloadError:function(a,b){this.__errorCount+=1,this.__isFinished()&&this.$callback(b)},__downloadImage:function(a,b){return this.__imageDownloader.download(a,{fn:this.__onDownloadSuccess,scope:this,args:b},{fn:this.__onDownloadError,scope:this,args:b})},__isFinished:function(){return this.__downloadQueue.length==this.__successCount+this.__errorCount},__getCompleteUrl:function(a){return this.__rootFolder+a}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/asset/ImageDownloader.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.asset.ImageDownloader",$extends:"games.common.BaseObject",$dependencies:["aria.utils.Function"],$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{download:function(a,b,c){var d=new Image;return d.addEventListener("load",this.__getWrappedCallback(b),!1),d.addEventListener("error",this.__getWrappedCallback(c),!1),d.src=a,d},__getWrappedCallback:function(a){return this.$Function.bind(function(){this.$callback(a)},this)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/BaseObject.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.common.BaseObject",$constructor:function(){return this.$JsObject.constructor.call(this),this.createShortcutsForDependencies()},$prototype:{createShortcutsForDependencies:function(){var a,b,c,d;if(!this.constructor.classDefinition.$alreadyCreatedShortcutDep){d=this.getDependenciesRec(this);for(b=0,c=d.length;b<c;b++)a=d[b],this.createShortcutForClasspath(a);return this.constructor.classDefinition.$alreadyCreatedShortcutDep=!0}},getDependenciesRec:function(a){var b,c;return b=this.getDependencies(a),c=a.constructor.superclass,c?b.concat(this.getDependenciesRec(c)):b},getDependencies:function(a){return a.constructor.classDefinition.$dependencies||[]},createShortcutForClasspath:function(a){var b;b=this.extractClassnameFromClasspath(a);if(!this.constructor.prototype["$"+b])return this.constructor.prototype["$"+b]=Aria.getClassRef(a)},extractClassnameFromClasspath:function(a){return a.match(/\.([0-9a-z_]+)$/i)[1]},on:function(a,b,c){var d;return d={},d[b]={fn:c,scope:this},a.$on(d)}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/canvas/Canvas.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.canvas.Canvas",$extends:"games.common.BaseObject",$dependencies:[],$implements:[],$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/clock/AnimationLoop.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.common.clock.AnimationLoop",$extends:"games.common.BaseObject",$dependencies:["games.common.clock.BrowserAnimationHelper"],$constructor:function(){return this.$BaseObject.constructor.call(this),this.isRunning=!1,this.browserAnimationHelper=new this.$BrowserAnimationHelper,this},$prototype:{setLoopCallback:function(a,b){return this.loopCallback={fn:a,scope:b}},start:function(){return this.isRunning=!0,this.loop()},loop:function(){if(this.isRunning)return this.executeLoop()},executeLoop:function(){return this.$callback(this.loopCallback),this.browserAnimationHelper.requestRepaint(this.loop,this)},stop:function(){return this.isRunning=!1,this.callback=null},isOn:function(){return this.isRunning}},$destructor:function(){return this.stop(),this.browserAnimationHelper.$dispose()}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/clock/BrowserAnimationHelper.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.clock.BrowserAnimationHelper",$constructor:function(){this.__requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}},$prototype:{requestRepaint:function(a,b){this.__requestAnimationFrame.call(window,function(){a.call(b)})}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/clock/EngineClock.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.clock.EngineClock",$extends:"games.common.BaseObject",$dependencies:["games.common.clock.AnimationLoop"],$statics:{getDefaultImplementation:function(a){var b=new games.common.clock.AnimationLoop;return new games.common.clock.EngineClock(a,b)}},$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__engine=a,this.__animationLoop=b,this.__animationLoop.setLoopCallback(this.onLoop,this)},$prototype:{start:function(){this.__animationLoop.start()},stop:function(){this.__animationLoop.stop()},isOn:function(){return this.__animationLoop.isOn()},onLoop:function(){this.__engine.update(),this.__engine.draw()}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/clock/Timer.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.clock.Timer",$constructor:function(a){this.__gameTime=0,this.__maxDeltaTimeAllowed=a,this.__previousTimestamp=this.__currentTimestamp=0},$prototype:{getDelta:function(){return this.__deltaTime},getTotalGameTime:function(){return this.__gameTime},update:function(){this.__updateTimestamps(Date.now()),this.__deltaTime=this.__calculateDelta(),this.__gameTime+=this.__deltaTime},__updateTimestamps:function(a){this.__previousTimestamp=this.__currentTimestamp,this.__currentTimestamp=a},__calculateDelta:function(){var a=this.__currentTimestamp-this.__previousTimestamp;return Math.min(a,this.__maxDeltaTimeAllowed)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/collision/Collider.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.collision.Collider",$constructor:function(){},$interface:{collide:function(a,b){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/collision/ColliderResolver.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.collision.ColliderResolver",$constructor:function(){},$interface:{getCollider:function(a,b){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/collision/CollisionDetector.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.collision.CollisionDetector",$constructor:function(){},$interface:{getCollisions:function(a){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/collision/CollisionEngine.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.collision.CollisionEngine",$interface:{resolveCollisions:function(){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/controller/Controller.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.controller.Controller",$interface:{draw:function(a){},update:function(a){},addEntity:function(a){},resolveCollisions:function(){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/engine/Engine.js
//kj0U8ZfQ5x
(function(){Aria.interfaceDefinition({$classpath:"games.common.engine.Engine",$constructor:function(a,b,c,d){},$interface:{addEntity:function(){},update:function(){},draw:function(){},getTimer:function(){}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/engine/GameEngine.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.common.engine.GameEngine",$extends:"games.common.BaseObject",$dependencies:["aria.utils.Array","games.common.assert.Assert","games.common.entity.Entity","games.common.clock.AnimationLoop","games.common.clock.Timer"],$implements:["games.common.engine.Engine"],$statics:{getDefaultImplementation:function(a){var b;return b=new games.common.clock.Timer(50),new games.common.engine.GameEngine(a,b)}},$constructor:function(a,b){return this.$BaseObject.constructor.call(this),this.timer=this.$Assert.isInstanceOf(b,"games.common.clock.Timer"),this.context=a,this.entities=[],this},$prototype:{addEntity:function(a){return this.$Assert.isInstanceOf(a,"games.common.entity.Entity"),this.entities.push(a)},update:function(){var a,b,c,d,e;this.timer.update(),a=this.timer.getDelta(),e=[];for(b=c=d=this.entities.length-1;c>=0;b=c+=-1)e.push(this.__updateEntity(this.entities[b],a));return e},draw:function(){var a,b,c,d;this.context.save(),this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),d=this.entities;for(b=0,c=d.length;b<c;b++)a=d[b],a.draw(this.context);return this.context.restore()},getTimer:function(){return this.timer},getEntities:function(){return this.entities},setEntities:function(a){this.entities=a},__removeEntity:function(a){return this.$Array.remove(this.entities,a)},__updateEntity:function(a,b){return a.isDestroyed()?this.__removeEntity(a):a.update(b,this.timer)}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/entity/DestroyableEntity.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.entity.DestroyableEntity",$implements:["games.common.entity.Entity"],$extends:"games.common.BaseObject",$constructor:function(){this.$BaseObject.constructor.call(this),this.__isDestroyed=!1},$prototype:{update:function(){},draw:function(){},isDestroyed:function(){return this.__isDestroyed},destroy:function(){this.__isDestroyed=!0}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/entity/Entity.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.entity.Entity",$interface:{update:function(a){},draw:function(a){},isDestroyed:function(){},destroy:function(){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/entity/PhysicalEntity.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.entity.PhysicalEntity",$extends:"games.common.entity.Entity",$interface:{getHitbox:function(){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/entity/SpriteEntity.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.entity.SpriteEntity",$extends:"games.common.BaseObject",$dependencies:[],$implements:[],$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/entity/Square.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.entity.Square",$extends:"games.common.BaseObject",$dependencies:[],$implements:["games.common.entity.Entity"],$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{update:function(){},destroy:function(){},isDestroyed:function(){},draw:function(a,b){b.strokeStyle=a,b.beginPath(),b.moveTo(this.x,this.y),b.lineTo(this.x,this.y+this.height),b.lineTo(this.x+this.width,this.y+this.height),b.lineTo(this.x+this.width,this.y),b.lineTo(this.x,this.y),b.stroke(),b.closePath()}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/goal/Goal.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.goal.Goal",$interface:{update:function(a){},isCompleted:function(){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/hitbox/Hitbox.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.hitbox.Hitbox",$interface:{intersects:function(a){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/hitbox/SquareHitbox.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.hitbox.SquareHitbox",$dependencies:["games.common.entity.Square"],$constructor:function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d},$prototype:{intersects:function(a){return this.__intersectsOnY(a)&&this.__intersectsOnX(a)},draw:window.location.href.toLowerCase().indexOf("hitbox")!=-1?function(a){games.common.entity.Square.prototype.draw.call(this,"#faa",a)}:function(){},__intersectsOnX:function(a){return this.x<=a.x&&this.x+this.width>=a.x?!0:this.x>=a.x&&this.x<=a.x+a.width?!0:!1},__intersectsOnY:function(a){return this.y<=a.y&&this.y+this.height>=a.y?!0:this.y>=a.y&&this.y<=a.y+a.height?!0:!1}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/BasicInputRecorder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.input.BasicInputRecorder",$extends:"games.common.BaseObject",$dependencies:["aria.utils.Array"],$implements:["games.common.input.InputRecorder"],$constructor:function(){this.$BaseObject.constructor.call(this),this._currentGameTime=-1,this.__inputs={},this.__publishedInputs={}},$prototype:{start:function(){throw new Error("BasicInputRecorder:start is an abstract method")},stop:function(){throw new Error("BasicInputRecorder:stop is an abstract method")},update:function(a){this._currentGameTime=a,this.__publishInputs(),this.__removeCompletedInputs()},getInputByCode:function(a){return this.__publishedInputs[a]||null},addInput:function(a){var b=a.getCode(),c=this.__getInternalInputByCode(b);c||(this.__inputs[b]=a,this.__publishedInputs[b]=a)},__publishInputs:function(){this.__publishedInputs={};for(var a in this.__inputs){if(!this.__inputs.hasOwnProperty(a))continue;this.__publishedInputs[a]=this.__inputs[a]}},__removeCompletedInputs:function(){for(var a in this.__inputs){if(!this.__inputs.hasOwnProperty(a))continue;this.__inputs[a].isCompleted()&&delete this.__inputs[a]}},__getInternalInputByCode:function(a){return this.__inputs[a]||null},__completeInputByCode:function(a){var b=this.__getInternalInputByCode(a);b&&b.complete()}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/CompositeInputRecorder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.input.CompositeInputRecorder",$extends:"games.common.BaseObject",$dependencies:["games.common.assert.Assert","aria.utils.Array"],$implements:["games.common.input.InputRecorder"],$constructor:function(a){this.$BaseObject.constructor.call(this),this.__recorders=this.$Assert.isArrayOf(a,"games.common.input.InputRecorder")},$prototype:{start:function(){this.$Array.forEach(this.__recorders,function(a){a.start()})},stop:function(){this.$Array.forEach(this.__recorders,function(a){a.stop()})},getInputByCode:function(a){for(var b=0;b<this.__recorders.length;b++){var c=this.__recorders[b];if(c.getInputByCode(a))return c.getInputByCode(a)}return null},update:function(a){this.$Array.forEach(this.__recorders,function(b){b.update(a)})}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/DefaultInput.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.input.DefaultInput",$implements:["games.common.input.Input"],$extends:"games.common.BaseObject",$constructor:function(a){this.$BaseObject.constructor.call(this),this.__code=a,this.__duration=0,this.__isCompleted=!1},$prototype:{getCode:function(){return this.__code},complete:function(){this.update=function(){},this.__isCompleted=!0},isCompleted:function(){return this.__isCompleted},getDuration:function(){return this.__duration},update:function(a){this.__duration+=a}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/Input.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.input.Input",$interface:{getCode:function(){},complete:function(){},isCompleted:function(){},update:function(a){},getDuration:function(){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/InputRecorder.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.input.InputRecorder",$interface:{start:function(){},stop:function(){},update:function(a){},getInputByCode:function(a){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/KeyboardMouseRecorder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.input.KeyboardMouseRecorder",$extends:"games.common.input.CompositeInputRecorder",$dependencies:["games.common.input.KeyboardRecorder","games.common.input.MouseRecorder","games.common.assert.Assert","aria.utils.Array"],$implements:["games.common.input.InputRecorder"],$statics:{getDefaultImplementation:function(){var a=new games.common.input.KeyboardRecorder,b=new games.common.input.MouseRecorder;return new games.common.input.KeyboardMouseRecorder(a,b)}},$constructor:function(a,b){this.$CompositeInputRecorder.constructor.call(this,[a,b])}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/KeyboardRecorder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.input.KeyboardRecorder",$extends:"games.common.input.BasicInputRecorder",$dependencies:["games.common.input.DefaultInput","aria.utils.Event","aria.utils.Array"],$implements:["games.common.input.InputRecorder"],$constructor:function(){this.$BasicInputRecorder.constructor.call(this)},$prototype:{start:function(){this.$Event.addListener(document,"keydown",{fn:this.__onKeydown,scope:this}),this.$Event.addListener(document,"keyup",{fn:this.__onKeyup,scope:this})},stop:function(){this.$Event.removeListener(document,"keydown",{fn:this.__onKeydown,scope:this}),this.$Event.removeListener(document,"keyup",{fn:this.__onKeyup,scope:this})},__onKeydown:function(a){var b=this.__getCodeFromEvent(a);this.addInput(new this.$DefaultInput(b,this._currentGameTime))},__onKeyup:function(a){var b=this.__getCodeFromEvent(a),c=this.getInputByCode(b);c&&c.complete()},__getCodeFromEvent:function(a){return"KEYBOARD_"+a.keyCode}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/MouseInput.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.common.input.MouseInput",$extends:"games.common.input.DefaultInput",$constructor:function(a,b){return this.event=b,this.$DefaultInput.constructor.call(this,a),this},$prototype:{updateEvent:function(a){this.event=a},getX:function(){return this.event.clientX},getY:function(){return this.event.clientY}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/MouseRecorder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.input.MouseRecorder",$extends:"games.common.input.BasicInputRecorder",$dependencies:["games.common.input.MouseInput","aria.utils.Event","aria.utils.Array"],$implements:["games.common.input.InputRecorder"],$constructor:function(){this.$BasicInputRecorder.constructor.call(this)},$prototype:{start:function(){this.$Event.addListener(document,"mousedown",{fn:this.__onMousedown,scope:this}),this.$Event.addListener(document,"mouseup",{fn:this.__onMouseup,scope:this})},stop:function(){this.$Event.removeListener(document,"mousedown",{fn:this.__onMousedown,scope:this}),this.$Event.removeListener(document,"mouseup",{fn:this.__onMouseup,scope:this})},__onMousedown:function(a){var b=this.__getCodeFromEvent(a);this.addInput(new this.$MouseInput(b,a))},__onMouseup:function(a){var b=this.__getCodeFromEvent(a),c=this.getInputByCode(b);c&&(c.updateEvent(a),c.complete())},__getCodeFromEvent:function(a){return"MOUSE_"+a.button}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/StandardKeyboardRecorder.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.common.input.StandardKeyboardRecorder",$extends:"games.common.BaseObject",$implements:["games.common.input.InputRecorder"],$dependencies:["games.shoot.utils.Console"],$constructor:function(a){return this.$BaseObject.constructor.call(this),this.keyboardRecorder=a,this},$prototype:{start:function(){return this.keyboardRecorder.start()},stop:function(){return this.keyboardRecorder.stop()},update:function(a){return this.keyboardRecorder.update(a)},getInputByCode:function(a){var b;b=this.keyboardRecorder.getInputByCode(this.translateToDeviceCode(a));if(b!=null)return b},translateToDeviceCode:function(a){switch(a){case"ENTER":return"KEYBOARD_13";case"P":return"KEYBOARD_80";case"R":return"KEYBOARD_82"}}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/test.js
//kj0U8ZfQ5x
var myMethod=function(){var a=!1;!!a};
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/TouchInputRecorder (Copie de Julian's macbook en conflit 2012-05-01).js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.common.input.TouchInputRecorder",$extends:"games.common.input.BasicInputRecorder",$dependencies:["aria.utils.Event","aria.core.Timer","games.shoot.utils.Console","games.common.input.DefaultInput"],$prototype:{start:function(){return this.$Event.addListener(document,"touchstart",{fn:this.onTouchStart,scope:this}),this.$Event.addListener(document,"touchend",{fn:this.onToucheEnd,scope:this})},stop:function(){return this.$Event.removeListener(document,"touchstart",{fn:this.onTouchStart,scope:this}),this.$Event.removeListener(document,"touchend",{fn:this.onToucheEnd,scope:this})},onToucheEnd:function(a){switch(a.touches.length){case 0:return this.getInputByCode("TAP").complete();case 1:return this.getInputByCode("DOUBLETAP").complete()}},onTouchStart:function(a){var b;a.touches.length===2?b=new this.$DefaultInput("DOUBLETAP",this._currentGameTime):a.touches.length===1&&(b=new this.$DefaultInput("TAP",this._currentGameTime));if(!this.getInputByCode(b.getCode))return this.addInputAndPrevent(b,a)},addInputAndPrevent:function(a,b){var c;return this.addInput(a),c=b.targetTouches[0],this.$Console.log(""+a.getCode()+" : "+b.touches.length+" : "+c.pageX+" : "+c.pageY),evt.preventDefault()}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/TouchInputRecorder (Julian-PC's conflicted copy 2012-05-01).js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.common.input.TouchInputRecorder",$extends:"games.common.input.BasicInputRecorder",$dependencies:["aria.utils.Event","aria.core.Timer","games.shoot.utils.Console","games.common.input.DefaultInput"],$constructor:function(){return this.$BasicInputRecorder.constructor.call(this),this.gameContainer=document.getElementById("gameContainer"),this},$prototype:{start:function(){return this.$Event.addListener(this.gameContainer,"touchstart",{fn:this.onTouchStart,scope:this}),this.$Event.addListener(this.gameContainer,"touchend",{fn:this.onTouchEnd,scope:this})},stop:function(){return this.$Event.removeListener(this.gameContainer,"touchstart",{fn:this.onTouchStart,scope:this}),this.$Event.removeListener(this.gameContainer,"touchend",{fn:this.onTouchEnd,scope:this})},onTouchEnd:function(a){var b;switch(a.touches.length){case 0:b=this.getInputByCode("TAP");if(b)return this.$Console.log("found input to remove"),b.complete();break;case 1:b=this.getInputByCode("DOUBLETAP");if(b)return this.$Console.log("found input to remove"),b.complete()}},onTouchStart:function(a){var b,c;a.touches.length===2?b=new this.$DefaultInput("DOUBLETAP",this._currentGameTime):a.touches.length===1&&(b=new this.$DefaultInput("TAP",this._currentGameTime));if(!this.getInputByCode(b.getCode()))return c=a.targetTouches[0],b.x=c.pageX-this.gameContainer.getBoundingClientRect().left,b.y=c.pageY-this.gameContainer.getBoundingClientRect().top,this.addInputAndPrevent(b,a)},addInputAndPrevent:function(a,b){var c;return this.addInput(a),c=b.targetTouches[0],b.preventDefault()}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/input/TouchInputRecorder.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.common.input.TouchInputRecorder",$extends:"games.common.input.BasicInputRecorder",$dependencies:["aria.utils.Event","aria.core.Timer","games.shoot.utils.Console","games.common.input.DefaultInput"],$constructor:function(){return this.$BasicInputRecorder.constructor.call(this),this.gameContainer=document.getElementById("gameContainer"),this},$prototype:{start:function(){return this.$Event.addListener(this.gameContainer,"touchstart",{fn:this.onTouchStart,scope:this}),this.$Event.addListener(document,"touchend",{fn:this.onTouchEnd,scope:this}),this.$Event.addListener(document,"touchmove",{fn:this.onTouchMove,scope:this}),this.$Event.addListener(window,"devicemotion",{fn:this.onDeviceMotion,scope:this})},stop:function(){return this.$Event.removeListener(this.gameContainer,"touchstart",{fn:this.onTouchStart,scope:this}),this.$Event.removeListener(this.gameContainer,"touchend",{fn:this.onTouchEnd,scope:this})},onDeviceMotion:function(a){var b,c;return b=a.accelerationIncludingGravity,c=this.getInputByCode("MOVE"),c||(c=new this.$DefaultInput("MOVE",this._currentGameTime),this.addInputAndPrevent(c,a)),c.x=b.x,c.y=b.y,c.z=b.z,a.preventDefault()},onTouchEnd:function(a){var b;switch(a.touches.length){case 0:b=this.getInputByCode("TAP"),b&&b.complete();break;case 1:b=this.getInputByCode("DOUBLETAP"),b&&b.complete()}return event.preventDefault()},onTouchStart:function(a){var b;a.touches.length===2?b=new this.$DefaultInput("DOUBLETAP",this._currentGameTime):a.touches.length===1&&(b=new this.$DefaultInput("TAP",this._currentGameTime));if(!this.getInputByCode(b.getCode()))return this.addInputAndPrevent(b,a)},onTouchMove:function(a){return a.preventDefault()},addInputAndPrevent:function(a,b){return this.addInput(a),b.preventDefault()}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/math/GameMath.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.common.math.GameMath",$extends:"games.common.BaseObject",$dependencies:["aria.utils.Math"],$statics:{normalizeFromToWithDelta:function(a,b,c){var d;return c=Math.abs(c),a>b&&(d=Math.max(b,a-c)),a<b&&(d=Math.min(b,a+c)),a===b&&(d=b),d}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/math/Pythagore.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.math.Pythagore",$extends:"games.common.BaseObject",$constructor:function(){this.$BaseObject.constructor.call(this)},$statics:{calculateDiag:function(a,b){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2))}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/math/Random.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.math.Random",$statics:{nextInt:function(a){return Math.floor(Math.random()*a)},nextModulo:function(a){return games.common.math.Random.nextInt(a)%a},nextBoolean:function(){return!!games.common.math.Random.nextInt(2)},polarize:function(a){return games.common.math.Random.nextBoolean()?a:-1*a}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/sprite/AnimatedSprite.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.sprite.AnimatedSprite",$extends:"games.common.BaseObject",$implements:[],$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__sprites=a,this.__frameDuration=b,this.__totalDuration=a.length*b,this.__elapsedTime=0},$prototype:{update:function(a){this.__elapsedTime+=a},draw:function(a,b,c,d){this.__getCurrentSprite().draw(a,b,c,d)},rotate:function(a){for(var b=0;b<this.__sprites.length;b++)this.__sprites[b].rotate(a)},scale:function(a,b){for(var c=0;c<this.__sprites.length;c++)this.__sprites[c].scale(a,b)},__getCurrentSprite:function(){var a=Math.floor(this.__elapsedTime/this.__frameDuration);return this.__sprites[a%this.__sprites.length]}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/sprite/AnimatedSpriteBuilder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.sprite.AnimatedSpriteBuilder",$extends:"games.common.BaseObject",$dependencies:["games.common.sprite.AnimatedSprite","games.common.sprite.Sprite"],$implements:[],$statics:{__cache:{},buildFromFramesheetUrlAndRotate:function(a,b,c,d,e){var f={angle:e,scale:{x:1,y:1}},g=games.common.sprite.AnimatedSpriteBuilder.__getTransformedSprites(a,b,c,d,f);return new games.common.sprite.AnimatedSprite(g,c)},buildFromUrlAndTransform:function(a,b,c,d,e){var f=games.common.sprite.AnimatedSpriteBuilder.__getTransformedSprites(a,b,c,d,e);return new games.common.sprite.AnimatedSprite(f,c)},__getTransformedSprites:function(a,b,c,d,e){var f=a+e.angle+"__"+e.scale.x+"__"+e.scale.y,g=games.common.sprite.AnimatedSpriteBuilder.__cache;if(g[f])return g[f];var h=d.getAsset(a),i=(new games.common.sprite.AnimatedSpriteBuilder(h,b,c)).build();return e.angle&&i.rotate(e.angle),e.scale&&(e.scale.x!=1||e.scale.y!=1)&&i.scale(e.scale.x,e.scale.y),g[f]=i.__sprites,g[f]}},$constructor:function(a,b,c){this.$BaseObject.constructor.call(this),this.__framesheet=a,this.__frameWidth=b,this.__frameDuration=c},$prototype:{build:function(){var a=[],b=0;while(b+this.__frameWidth<=this.__framesheet.width)a.push(this.__getFrameAtOffset(b)),b+=this.__frameWidth;return new this.$AnimatedSprite(a,this.__frameDuration)},__getFrameAtOffset:function(a){var b=this.__frameWidth,c=this.__framesheet.height,d=this.__framesheet,e=this.__createCanvas(b,c),f=e.getContext("2d");return f.save(),f.drawImage(d,a,0,b,c,0,0,b,c),f.restore(),new this.$Sprite(e)},__createCanvas:function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,c}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/sprite/BlinkingSprite.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.sprite.BlinkingSprite",$extends:"games.common.BaseObject",$dependencies:[],$implements:["games.common.sprite.Drawable"],$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__period=b,this.__sprite=a,this.__timeCount=0},$prototype:{update:function(a){this.__timeCount+=a,this.__sprite.update&&this.__sprite.update(a)},draw:function(a,b,c){this.__isBlinking?this.__blinkDraw(a,b,c):this.__sprite.draw(a,b,c)},setBlinking:function(a){this.__isBlinking=a},__blinkDraw:function(a,b,c){this.__timeCount%(2*this.__period)>this.__period&&this.__sprite.draw(a,b,c)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/sprite/Drawable.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.common.sprite.Drawable",$interface:{draw:function(){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/sprite/FrameSplitter.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.sprite.FrameSplitter",$extends:"games.common.BaseObject",$dependencies:[],$implements:[],$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__image=a,this.__frameWidth=b},$prototype:{split:function(){var a=[],b=0;while(b+this.__frameWidth<=this.__image.width)a.push(this.__getFrame(b)),b+=this.__frameWidth;return a},__getFrame:function(a){var b=this.__frameWidth,c=d.height,d=this.__image,e=this.__createCanvas(b,c),f=e.getContext("2d");return f.save(),f.drawImage(d,a,0,b,c,0,0,b,c),f.restore(),new this.$Sprite(e)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/sprite/Sprite.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.sprite.Sprite",$extends:"games.common.BaseObject",$implements:["games.common.sprite.Drawable"],$statics:{__cache:{},buildForSpriteUrl:function(a,b,c){if(games.common.sprite.Sprite.__cache[a+b])return games.common.sprite.Sprite.__cache[a+b];var d=new games.common.sprite.Sprite(c.getAsset(a));return d.rotate(b),games.common.sprite.Sprite.__cache[a+b]=d,d}},$constructor:function(a){this.$BaseObject.constructor.call(this),this.__image=a},$prototype:{draw:function(a,b,c,d){d=d||1,this.__image&&a&&b&&this.__drawAtXY(a,b,c,d)},rotate:function(a){var b=Math.max(this.__image.height,this.__image.width),c=this.__createCanvas(b,b),d=c.getContext("2d");d.save(),d.translate(b/2,b/2),d.rotate(a+Math.PI/2),d.drawImage(this.__image,-(this.__image.width/2),-(this.__image.height/2)),d.restore(),this.__image=c},scale:function(a,b){var c=this.__image.width*a,d=this.__image.height*b,e=this.__createCanvas(Math.abs(c),Math.abs(d)),f=e.getContext("2d");f.save(),f.translate(e.width/2,e.height/2),f.scale(a,b),f.drawImage(this.__image,-this.__image.width/2,-this.__image.height/2),f.restore(),this.__image=e},getImage:function(){return this.__image},__drawAtXY:function(a,b,c,d){var e=this.__image.width,f=this.__image.height,g=this.__image;typeof d=="number"&&(d={x:d,y:d}),a-=e*d.x/2,b-=f*d.y/2,c.drawImage(g,0,0,e,f,a,b,e*d.x,f*d.y)},__createCanvas:function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,c}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/sprite/SpriteBuilder.js
//kj0U8ZfQ5x
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};Aria.classDefinition({$classpath:"games.common.sprite.SpriteBuilder",$dependencies:["games.common.sprite.Sprite"],$singleton:!0,$constructor:function(){return this.cache=new Object,this},$prototype:{build:function(b,c){var d,e,f;return e=""+b+"__"+c.angle+"__"+c.scale.x+"__"+c.scale.y,a.call(this.cache,e)>=0?this.cache[e]:(d=games.shoot.AssetManager.getAsset(b),f=new games.common.sprite.Sprite(d),f.rotate(c.angle),f.scale(c.scale.x,c.scale.y),this.cache[e]=f)}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/sprite/SpritePattern.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.sprite.SpritePattern",$extends:"games.common.BaseObject",$dependencies:["games.common.sprite.Sprite"],$statics:{buildForSpriteUrl:function(a,b){var c=b.getAsset(a),d=new games.common.sprite.Sprite(c);return new games.common.sprite.SpritePattern(d)}},$constructor:function(a){this.$BaseObject.constructor.call(this),this.__sprite=a,this.__spriteHeight=0},$prototype:{draw:function(a,b,c,d){if(b>=c)return;var e=this.__sprite.getImage(),f=this.__spriteHeight||e.height,g=e.width,h=0;while(h+b+f<=c)d.drawImage(e,0,this.__spriteHeight?e.height-this.__spriteHeight:0,g,e.height,a-g/2,h+b,g,f),h+=f-1;d.drawImage(e,0,0,g,c-(h+b),a-g/2,h+b,g,c-(h+b))},scale:function(a){this.__sprite.scale(a,a)},rotate:function(a){this.__sprite.rotate(a)},setSpriteHeight:function(a){this.__spriteHeight=a}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/sprite/SpriteUtils.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.sprite.SpriteUtils",$statics:{copySpriteAndRotate:function(a,b){var c=games.common.sprite.SpriteUtils.__getSquareSizeForImage(a),d=games.common.sprite.SpriteUtils.createSquareCanvas(c),e=d.getContext("2d");return e.save(),e.translate(c/2,c/2),e.rotate(b+Math.PI/2),e.drawImage(a,-(a.width/2),-(a.height/2)),e.restore(),d},createSquareCanvas:function(a){return games.common.sprite.SpriteUtils.createCanvas(a,a)},createCanvas:function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,c},splitInFrames:function(a,b){var c=[],d=0;while(d<a.width)c.push(games.common.sprite.SpriteUtils.__getSubFrame(a,offset,b));return c},__getSquareSizeForImage:function(a){return Math.max(a.width,a.height)},__getSubFrame:function(a,b,c){var d=this.__createCanvas(c,a.height),e=d.getContext("2d");return e.save(),e.drawImage(a,b,0,c,a.height,0,0,c,a.height),e.restore(),d}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/text/Text.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.common.text.Text",$extends:"games.common.entity.DestroyableEntity",$implements:["games.common.sprite.Drawable"],$statics:{DEFAULT_SIZE:"24pt",DEFAULT_COLOR:"#fff",DEFAULT_FAMILY:"Game",DEFAULT_TEXTALIGN:"start",DEFAULT_TEXTBASELINE:"top"},$constructor:function(a,b,c,d,e){this.$DestroyableEntity.constructor.call(this),this.__family=a||this.DEFAULT_FAMILY,this.__size=b||this.DEFAULT_SIZE,this.__color=c||this.DEFAULT_COLOR,this.__textAlign=d||this.DEFAULT_TEXTALIGN,this.__textBaseline=e||this.DEFAULT_TEXTBASELINE},$prototype:{draw:function(a,b,c){c.textAlign=this.__textAlign,c.textBaseline=this.__textBaseline,c.font=this.__size+" "+this.__family,c.fillStyle=this.__color,c.fillText(this.__content,a,b)},setContent:function(a){this.__content=a+""},setSize:function(a){this.__size=a},setFamily:function(a){this.__family=a},setColor:function(a){this.__color=a},update:function(){},destroy:function(){this.__destroyed=!0},isDestroyed:function(){return this.__destroyed}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/common/utils/UserAgent.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.common.utils.UserAgent",$extends:"games.common.BaseObject",$statics:{isTouchDevice:function(){return this.isTouchAgent(this.getUserAgent())},isTouchAgent:function(a){return a.match(/ipad|iphone|android/ig)},getUserAgent:function(){return window.navigator.userAgent}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/EventBus.js
//kj0U8ZfQ5x
var EventBus=function(){this._events={}};EventBus.prototype={raiseEvent:function(a,b){var c=this._getListerners(a),d={eventName:a,args:b};for(var e=0;e<c.length;e++){var f=c[e];f.method.apply(f.scope,[d].concat(f.args))}},addEventListener:function(a,b){return this._getListerners(a).push(b),b},removeEventListener:function(a,b){var c=this._getListerners(a);for(var d=c.length-1;d>=0;d--)(b==c[d]||b.method==c[d].method)&&c.splice(d,1)},_getListerners:function(a){return this._events[a]||(this._events[a]=[]),this._events[a]}};var Handler=function(a,b,c){this.method=a,this.scope=b,this.args=c},bus=new EventBus,MyClass=function(){this.creationDate=(new Date+"").substring(0,24),console.log(this.onMyEvent+""),this._myEventHandler=bus.addEventListener("myEvent",new Handler(this.onMyEvent,this,["hi !"]))};MyClass.prototype.onMyEvent=function(a,b){console.log("Instance created at ['"+this.creationDate+"'] captured event : ['"+a.eventName+"']. And by the way : "+b+" "+a.args.raiseArg)},MyClass.prototype.destroy=function(){bus.removeEventListener("myEvent",this._myEventHandler)};var myInstance=new MyClass;window.setTimeout(function(){bus.raiseEvent("myEvent",{raiseArg:" it's now "+(new Date+"").substring(0,24)}),myInstance.destroy(),bus.raiseEvent("myEvent")},3e3);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/inheritance.js
//kj0U8ZfQ5x
var classA=function(){this.parentProp="in class A",this.myObject={a:0,b:1}};classA.prototype={parentMethod:function(){console.log("Parent Method !")}};var classB=function(){classA.constructor.call(this)},inherit=function(a,b){for(var c in b.prototype)b.prototype.hasOwnProperty(c)&&!a.prototype.hasOwnProperty(c)&&(a.prototype[c]=b.prototype[c])},magic=function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a},inherit=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a},inheritCrockfordIsAMoron=function(a,b){a.prototype=new b,a.prototype.constructor=a};
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/asset/Assets.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.asset.Assets",$singleton:!0,$constructor:function(){return["ship.png","shipBis.png","shipLeftBis.png","shipRightBis.png","enemyBullet.png","enemyExplosion3.png","enemyExplosion4.png","shipExplosionAnimated.png","shipBullet.png","enemyBulletAnimated.png","enemyBulletAnimatedSmallRed.png","shipBeam.png","beamBottomAnimated.png","beamBottomAnimatedSmall.png","invincibilityShield.png","invincibilityShieldAnimated.png","background.png","backgroundBig.png","backgroundBigJungle.png","enemy.png","coin.png","coinAnimated.png","powerupanimated.png","vreuBulletAnimated.png","vreuAnimated3.png"]}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/clock/StatsAwareEngineClock.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.shoot.clock.StatsAwareEngineClock",$extends:"games.common.clock.EngineClock",$constructor:function(a,b,c){return this.$EngineClock.constructor.call(this,a,b),this.statsRecorder=c,this.statsTool=this.createStatsTool(),this},$prototype:{createStatsTool:function(){var a;return a=new Stats,a.setMode(0),a.domElement.style.position="absolute",a.domElement.style.left="0px",a.domElement.style.top="0px",document.body.appendChild(a.domElement),a},onLoop:function(){var a;return this.statsTool.begin(),a=Date.now(),this.$EngineClock.onLoop.call(this),this.statsTool.end(),this.statsRecorder.updateTime("loop",Date.now()-a)}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/collision/BeamEnemyCollider.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.collision.BeamEnemyCollider",$extends:"games.common.BaseObject",$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{collide:function(a,b){if(!a.$Beam)return this.collide(b,a);a.collideWithHitbox(b.getHitbox()),b.__hits=b.__hits?b.__hits+1:1,b.__hits>5&&b.destroy()}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/collision/BulletEnemyCollider.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.collision.BulletEnemyCollider",$extends:"games.common.BaseObject",$dependencies:["games.shoot.utils.GameType"],$implements:["games.common.collision.Collider"],$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{collide:function(a,b){if(this.$GameType.isPhysicalEnemy(a))return this.collide(b,a);a.destroy(),b.hit(1)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/collision/BulletShipCollider.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.collision.BulletShipCollider",$extends:"games.common.BaseObject",$implements:["games.common.collision.Collider"],$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{collide:function(a,b){a.destroy(),b.destroy()}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/collision/ColliderResolverImpl.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.collision.ColliderResolverImpl",$dependencies:["games.shoot.entity.Bullet","games.shoot.collision.BulletEnemyCollider","games.shoot.collision.BeamEnemyCollider","games.shoot.collision.BulletShipCollider","games.shoot.collision.LootShipCollider","games.shoot.collision.TractableMagnetCollider","games.shoot.utils.GameType"],$extends:"games.common.BaseObject",$implements:["games.common.collision.ColliderResolver"],$constructor:function(){this.$BaseObject.constructor.call(this),this.__cache={}},$prototype:{getCollider:function(a,b){if(this.__cache[a.$classpath]&&typeof this.__cache[a.$classpath][b.$classpath]!="undefined")return this.__cache[a.$classpath][b.$classpath];var c=this.__computeCollider(a,b)||this.__computeCollider(b,a);return this.__storeInCache(a,b,c),c},__computeCollider:function(a,b){var c=null;return this.$GameType.isBullet(a)?c=this.__resolveBulletCollision(a,b):this.$GameType.isBeam(a)?c=this.__resolveBeamCollision(a,b):this.$GameType.isLoot(a)?c=this.__resolveLootCollision(a,b):this.$GameType.isMagnet(a)&&(c=this.__resolveMagnetCollision(a,b)),c},__resolveBeamCollision:function(a,b){var c=null;return this.$GameType.isPhysicalEnemy(b)?new games.shoot.collision.BeamEnemyCollider:c},__resolveLootCollision:function(a,b){var c=null;return this.$GameType.isShip(b)?new games.shoot.collision.LootShipCollider:c},__resolveMagnetCollision:function(a,b){var c=null;return this.$GameType.isTractable(b)?new games.shoot.collision.TractableMagnetCollider:c},__resolveBulletCollision:function(a,b){var c=null;return this.$GameType.isPhysicalEnemy(b)&&a.isPlayerBullet()?new games.shoot.collision.BulletEnemyCollider:this.$GameType.isShip(b)&&a.isEnemyBullet()?new games.shoot.collision.BulletShipCollider:c},__storeInCache:function(a,b,c){this.__cache[a.$classpath]||(this.__cache[a.$classpath]={}),this.__cache[a.$classpath][b.$classpath]=c}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/collision/CollisionBucketBuilder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.collision.CollisionBucketBuilder",$extends:"games.common.BaseObject",$dependencies:["games.shoot.utils.GameType"],$implements:[],$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{build:function(a,b,c,d){var e=this.__createEmptyBuckets(b);for(var f=0;f<a.length;f++)this.$GameType.isPhysicalEntity(a[f])&&this.__storeEntityInBuckets(a[f],e,b,c,d);return e},__storeEntityInBuckets:function(a,b,c,d,e){var f=a.getHitbox(),g=Math.max(0,Math.floor(f.y/e*c)),h=Math.min(c-1,Math.floor((f.y+f.height)/e*c));for(var i=g;i<=h;i++)b[i].push(a)},__createEmptyBuckets:function(a){var b=[];for(var c=0;c<a;c++)b.push([]);return b}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/collision/CollisionDetectorImpl.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.collision.CollisionDetectorImpl",$extends:"games.common.BaseObject",$dependencies:["games.common.assert.Assert","aria.utils.Type","games.shoot.utils.Environment","games.shoot.collision.CollisionBucketBuilder"],$implements:["games.common.collision.CollisionDetector"],$statics:{BUCKETS:6},$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__colliderResolver=a,this.__collisionBucketBuilder=b||new this.$CollisionBucketBuilder},$prototype:{getCollisions:function(a){var b=[],c=this.__createPhysicalEntitiesBuckets(a);for(var d=0;d<c.length;d++)b=b.concat(this.__getCollisionsInBucket(c[d]));return b},__getCollisionsInBucket:function(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];for(var e=c+1;e<a.length;e++){var f=a[e];this.__areEntitiesColliding(d,f)&&b.push([d,f])}}return b},__createPhysicalEntitiesBuckets:function(a){var b=this.$Environment.BOARD.HEIGHT,c=this.$Environment.BOARD.WIDTH;return this.__collisionBucketBuilder.build(a,this.BUCKETS,c,b)},__areEntitiesColliding:function(a,b){return this.__colliderResolver.getCollider(a,b)?a.getHitbox().intersects(b.getHitbox()):!1},__isPhysicalEntity:function(a){return typeof a.$interfaces["games.common.entity.PhysicalEntity"]=="function"}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/collision/CollisionEngineImpl.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.collision.CollisionEngineImpl",$extends:"games.common.BaseObject",$dependencies:["games.common.assert.Assert","games.common.collision.ColliderResolver","games.common.collision.CollisionDetector","games.shoot.collision.ColliderResolverImpl","games.shoot.collision.CollisionDetectorImpl"],$implements:["games.common.collision.CollisionEngine"],$statics:{getDefaultImplementation:function(){var a=new games.shoot.collision.ColliderResolverImpl,b=new games.shoot.collision.CollisionDetectorImpl(a);return new games.shoot.collision.CollisionEngineImpl(b,a)}},$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__collisionDetector=this.$Assert.isInstanceOf(a,this.$CollisionDetector),this.__colliderResolver=this.$Assert.isInstanceOf(b,this.$ColliderResolver)},$prototype:{resolveCollisions:function(a){var b=this.__collisionDetector.getCollisions(a);for(var c=0;c<b.length;c++)this.__resolveCollision(b[c])},__resolveCollision:function(a){var b=a[0],c=a[1],d=this.__colliderResolver.getCollider(b,c);d&&d.collide(b,c)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/collision/LootShipCollider.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.collision.LootShipCollider",$extends:"games.common.BaseObject",$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{collide:function(a,b){if(!b.$Ship)return this.collide(b,a);b.collect(a),a.destroy()}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/collision/SquareCollisionBucketBuilder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.collision.SquareCollisionBucketBuilder",$extends:"games.common.BaseObject",$dependencies:["games.shoot.utils.GameType"],$implements:[],$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{build:function(a,b,c,d,e){var f=this.__createEmptyBuckets(b,c);for(var g=0;g<a.length;g++)this.$GameType.isPhysicalEntity(a[g])&&this.__storeEntityInBuckets(a[g],f,b,c,d,e);return f},__storeEntityInBuckets:function(a,b,c,d,e,f){var g=a.getHitbox(),h=Math.max(0,Math.floor(g.y/f*count)),i=Math.min(count-1,Math.floor((g.y+g.height)/f*count));for(var j=h;j<=i;j++)b[j].push(a)},__createEmptyBuckets:function(a,b){var c=[];for(var d=0;d<a*b;d++)c.push([]);return c}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/collision/TractableMagnetCollider.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.collision.TractableMagnetCollider",$extends:"games.common.BaseObject",$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{collide:function(a,b){if(!b.$Magnet)return this.collide(b,a);b.tractEntity(a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/controller/level/LevelController.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.shoot.controller.level.LevelController",$extends:"games.common.BaseObject",$dependencies:["games.common.clock.AnimationLoop","games.common.clock.EngineClock","games.common.engine.GameEngine","games.common.input.StandardKeyboardRecorder","games.shoot.clock.StatsAwareEngineClock","games.shoot.enemy.generator.ShootEnemyGenerator","games.shoot.engine.ExtendedEngine","games.shoot.engine.OverlayEngine","games.shoot.engine.ShootEngine","games.shoot.overlay.Overlay","games.shoot.overlay.Pause","games.shoot.player.PlayerController","games.shoot.ship.ShipInputRecorder","games.shoot.Stats","games.shoot.utils.RecorderFactory"],$constructor:function(a,b){var c,d,e;return this.$BaseObject.constructor.call(this),c=this.$RecorderFactory.getKeyboardRecorder(),e=new this.$Stats,this.gameEngine=this.$ShootEngine.getDefaultImplementation(a,e),this.gameClock=new this.$StatsAwareEngineClock(this.gameEngine,new this.$AnimationLoop,e),d=new this.$ShipInputRecorder(c),this.playerController=new this.$PlayerController(this.gameEngine,d),this.enemyController=new this.$ShootEnemyGenerator(this.gameEngine),this.recorder=new this.$StandardKeyboardRecorder(c),this.overlayEngine=this.$ExtendedEngine.getDefaultImplementation(b),this.overlayClock=this.$EngineClock.getDefaultImplementation(this.overlayEngine),this},$prototype:{start:function(){return this.gameEngine.addController(this.playerController),this.gameEngine.addController(this.enemyController),this.overlayEngine.addController(this),this.overlayEngine.addController(new this.$Overlay(this.overlayEngine,this.playerController)),this.gameClock.start(),this.overlayClock.start()},update:function(a){this.recorder.update(),this.recorder.getInputByCode("P")&&this.pause();if(this.recorder.getInputByCode("R"))return this.resume()},toggleEngine:function(){return this.gameClock.isOn()?this.pause():this.resume()},pause:function(){if(!this.pauseEntity)return this.pauseEntity=new this.$Pause,this.overlayEngine.addEntity(this.pauseEntity),this.gameClock.stop()},resume:function(){if(this.pauseEntity)return this.pauseEntity.destroy(),this.pauseEntity=null,this.gameClock.start()}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/controller/loading/AssetLoadingIndicator.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.controller.loading.AssetLoadingIndicator",$extends:"games.common.text.Text",$implements:["games.shoot.overlay.OverlayEntity"],$dependencies:["games.shoot.utils.Environment"],$statics:{FONT_SIZE:"18px",FONT_COLOR:"white",FONT_FAMILY:"Game"},$constructor:function(){this.$Text.constructor.call(this,this.FONT_FAMILY,this.FONT_SIZE,this.FONT_COLOR,"center","middle"),this.setContent("0")},$prototype:{setContent:function(a){this.$Text.setContent.call(this,"Loading Asset  : "+a)},draw:function(a){this.$Text.draw.call(this,this.$Environment.BOARD.WIDTH/2,this.$Environment.BOARD.HEIGHT/2,a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/controller/loading/GameTitle.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.shoot.controller.loading.GameTitle",$extends:"games.common.text.Text",$implements:["games.shoot.overlay.OverlayEntity"],$dependencies:["games.shoot.utils.Environment"],$statics:{FONT_SIZE:"52px",FONT_COLOR:"white",FONT_FAMILY:"Game"},$constructor:function(){return this.$Text.constructor.call(this,this.FONT_FAMILY,this.FONT_SIZE,this.FONT_COLOR,"center","middle"),this.setContent("HTML 5H007"),this},$prototype:{draw:function(a){return this.$Text.draw.call(this,this.$Environment.BOARD.WIDTH/2,200,a)}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/controller/loading/InviteText.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.shoot.controller.loading.InviteText",$extends:"games.common.text.Text",$implements:["games.shoot.overlay.OverlayEntity"],$dependencies:["games.shoot.utils.Environment","aria.utils.Math","games.common.utils.UserAgent","games.common.sprite.BlinkingSprite"],$statics:{FONT_SIZE:"36px",FONT_COLOR:"white",FONT_FAMILY:"Game",SPEED:.1,END_Y:400},$constructor:function(){var a,b;return this.$Text.constructor.call(this,this.FONT_FAMILY,this.FONT_SIZE,this.FONT_COLOR,"center","middle"),this.$UserAgent.isTouchDevice()?this.setContent("Touch to Start"):this.setContent("Press ENTER"),this.y=this.$Environment.BOARD.HEIGHT,a=this,b={draw:function(b,c,d){return a.$Text.draw.call(a,b,c,d)}},this.sprite=new this.$BlinkingSprite(b,350),this.sprite.setBlinking(!0),this},$prototype:{update:function(a){return this.sprite.update(a),this.y=Math.max(this.y-a*this.SPEED,this.END_Y)},draw:function(a){return this.sprite.draw(this.$Environment.BOARD.WIDTH/2,this.y,a)}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/controller/loading/LoadingController.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.shoot.controller.loading.LoadingController",$extends:"games.common.BaseObject",$dependencies:["games.common.clock.EngineClock","games.common.engine.GameEngine","games.common.input.StandardKeyboardRecorder","games.common.input.TouchInputRecorder","games.common.utils.UserAgent","games.shoot.asset.Assets","games.shoot.controller.loading.AssetLoadingIndicator","games.shoot.controller.loading.GameTitle","games.shoot.controller.loading.InviteText","games.shoot.engine.ExtendedEngine","games.shoot.utils.RecorderFactory"],$events:{complete:"fired when controller is done and should be replaced by next one"},$constructor:function(a,b){return this.$BaseObject.constructor.call(this),this.assetManager=a,this.$UserAgent.isTouchDevice()?this.recorder=new this.$TouchInputRecorder:this.recorder=new this.$StandardKeyboardRecorder(this.$RecorderFactory.getKeyboardRecorder()),this.loadingEngine=this.$ExtendedEngine.getDefaultImplementation(b),this.loadingClock=this.$EngineClock.getDefaultImplementation(this.loadingEngine),this},$prototype:{start:function(){var a,b,c,d;this.loadingClock.start(),this.assetLoadingIndicator=new this.$AssetLoadingIndicator,this.gameTitle=new this.$GameTitle,d=[this.assetLoadingIndicator,this.gameTitle];for(b=0,c=d.length;b<c;b++)a=d[b],this.loadingEngine.addEntity(a);return this.loadingEngine.addController(this),this.downloadAssets()},update:function(a){this.recorder.update();if(this.recorderHasStartInput())return this.leaveLoadingController()},recorderHasStartInput:function(){return this.$UserAgent.isTouchDevice()?this.recorder.getInputByCode("TAP"):this.recorder.getInputByCode("ENTER")},downloadAssets:function(){return this.assetManager.queueDownloads(this.$Assets),this.assetManager.$on({assetLoaded:{fn:this.onAssetLoaded,scope:this}}),this.assetManager.download({fn:this.onAssetPreloadFinished,scope:this})},leaveLoadingController:function(){return this.recorder.stop(),this.loadingClock.stop(),this.$raiseEvent("complete")},onAssetLoaded:function(a){return this.assetLoadingIndicator.setContent(""+(a.successCount-1)+"/"+a.total)},onAssetPreloadFinished:function(){return this.assetLoadingIndicator.destroy(),this.displayPressEnter(),this.recorder.start()},displayPressEnter:function(){return this.loadingEngine.addEntity(new this.$InviteText)}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/AirEnemy.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.AirEnemy",$dependencies:["games.shoot.enemy.EnemyTypes"],$extends:"games.common.entity.DestroyableEntity",$constructor:function(){this.$DestroyableEntity.constructor.call(this)},$prototype:{getType:function(){return this.$EnemyTypes.AIR}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/doni/Doni.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.doni.Doni",$implements:["games.common.entity.PhysicalEntity","games.shoot.enemy.PhysicalEnemy"],$dependencies:["games.common.hitbox.SquareHitbox","games.shoot.enemy.EnemyBullet","games.shoot.enemy.EnemyExplosionBuilder","games.common.sprite.Sprite","games.shoot.entity.engine.PositionEngine","games.shoot.enemy.doni.DoniScript","games.shoot.enemy.doni.DoniGun","games.shoot.entity.loot.coin.Coin","games.shoot.entity.loot.powerup.Power","games.shoot.utils.Environment","games.shoot.enemy.EnemyTypes","games.common.math.Random"],$extends:"games.shoot.enemy.AirEnemy",$statics:{DEFAULT_SPEED:.1,BULLET_INTERVAL:1e3,SIZE:10,LOOT_QTY:10,HIT_POINTS:1},$constructor:function(a,b,c){this.$AirEnemy.constructor.call(this),this.__engine=a,this.__positionEngine=new this.$PositionEngine(b,c),this.__gun=new this.$DoniGun(this.getPositionEngine(),a),this.__hits=0,this.__script=new this.$DoniScript(this),this.__sprite=this.$Sprite.buildForSpriteUrl("enemy.png",Math.PI/2,games.shoot.AssetManager)},$prototype:{draw:function(a){this.__sprite.draw(this.__positionEngine.getX(),this.__positionEngine.getY(),a),this.getHitbox().draw(a)},update:function(a){this.__script.update(a),this.__gun.update(a),this.__isOutOfBoardLimits()&&this.destroy()},getPositionEngine:function(){return this.__positionEngine},getGun:function(){return this.__gun},hit:function(a){this.__hits+=a,this.__hits>=this.HIT_POINTS&&this.destroy()},destroy:function(){this.$AirEnemy.destroy.call(this),this.__engine.addEntity(this.$EnemyExplosionBuilder.forPosition(this.__positionEngine));for(var a=0;a<this.LOOT_QTY;a++)this.__engine.addEntity(new this.$Coin(this.__positionEngine.getX(),this.__positionEngine.getY()));this.__engine.addEntity(new this.$Power(this.__positionEngine.getX(),this.__positionEngine.getY()))},__isOutOfBoardLimits:function(){return this.__positionEngine.getY()>this.$Environment.BOARD.HEIGHT+50},getHitbox:function(){return new this.$SquareHitbox(this.__positionEngine.getX()-this.SIZE,this.__positionEngine.getY()-this.SIZE,2*this.SIZE,2*this.SIZE)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/doni/DoniBullet.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.doni.DoniBullet",$dependencies:["games.common.sprite.AnimatedSpriteBuilder"],$extends:"games.shoot.entity.AnimatedBullet",$constructor:function(a,b,c,d){var e=games.common.sprite.AnimatedSpriteBuilder.buildFromFramesheetUrlAndRotate("enemyBulletAnimatedSmallRed.png",10,50,games.shoot.AssetManager,c);this.$AnimatedBullet.constructor.call(this,a,b,c,e)}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/doni/DoniFormationBuilder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.doni.DoniFormationBuilder",$extends:"games.common.BaseObject",$implements:["games.shoot.enemy.EnemyFormationBuilder"],$dependencies:["games.shoot.enemy.doni.Doni"],$constructor:function(a){this.$BaseObject.constructor.call(this),this.__engine=a,this.__xOrig=Math.floor(Math.random()*500/30)*30},$prototype:{build:function(){this.__addEnemyAtY(this.__xOrig)},__addEnemyAtY:function(a){var b=new this.$Doni(this.__engine,a,-5);this.__engine.addEntity(b)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/doni/DoniGun.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.doni.DoniGun",$extends:"games.common.BaseObject",$dependencies:["games.shoot.enemy.doni.DoniBullet","games.common.math.Random"],$implements:[],$statics:{COOLDOWN:5e3},$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__timeSinceLastBullet=4e3,this.__positionEngine=a,this.__engine=b},$prototype:{update:function(a){this.__timeSinceLastBullet+=a},fire:function(){this.__cooldownExpired()&&(this.__timeSinceLastBullet=0,this.__createBulletPattern())},__cooldownExpired:function(){return this.__timeSinceLastBullet>this.COOLDOWN},__createBulletPattern:function(){var a=this.__positionEngine.getX(),b=this.__positionEngine.getY()+15,c=.05;for(var d=0;d<3;d++){var e=Math.PI/2+this.$Random.nextInt(10)*c-5*c,f=new this.$DoniBullet(a-15+d*15,b,e);f.setSpeed(.1+this.$Random.nextInt(10)/100),f.setGroup(f.GROUPS.ENEMY),this.__engine.addEntity(f)}}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/doni/DoniScript.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.doni.DoniScript",$extends:"games.common.BaseObject",$dependencies:["games.shoot.goal.GoMove","games.shoot.goal.GoWaitAndFire","games.common.math.Random","games.shoot.utils.Environment"],$constructor:function(a){this.$BaseObject.constructor.call(this),this.__doni=a;var b=this.$Environment.BOARD.WIDTH,c=this.$Environment.BOARD.HEIGHT;this.__goals=[new this.$GoMove(a.getPositionEngine(),this.$Random.nextInt(b-b/5)+40,this.$Random.nextInt(40)+c/10),new this.$GoWaitAndFire(3e3,a.getGun()),new this.$GoMove(a.getPositionEngine(),this.$Random.nextInt(b-b/5)+40,this.$Random.nextInt(40)+c/2),new this.$GoWaitAndFire(3e3,a.getGun()),new this.$GoMove(a.getPositionEngine(),this.$Random.nextInt(b-b/5)+40,c+100)],this.__goalIndex=0},$prototype:{update:function(a){var b=this.__getCurrentGoal();b&&(b.update(a),b.isCompleted()&&this.__goalIndex++)},__getCurrentGoal:function(){return this.__goals[this.__goalIndex]}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/EnemyBullet.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.EnemyBullet",$dependencies:["games.common.sprite.AnimatedSpriteBuilder"],$extends:"games.shoot.entity.AnimatedBullet",$constructor:function(a,b,c,d){var e=games.common.sprite.AnimatedSpriteBuilder.buildFromFramesheetUrlAndRotate("enemyBulletAnimatedSmallRed.png",10,20,games.shoot.AssetManager,c);this.$AnimatedBullet.constructor.call(this,a,b,c,e)}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/EnemyExplosionBuilder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.EnemyExplosionBuilder",$extends:"games.common.BaseObject",$dependencies:["games.common.animation.Animation","games.shoot.entity.Explosion","games.common.math.Random","games.shoot.utils.Lol"],$statics:{forXY:function(a,b){return(new games.shoot.enemy.EnemyExplosionBuilder(a,b)).build()},forPosition:function(a){return games.shoot.enemy.EnemyExplosionBuilder.forXY(a.getX(),a.getY())},DURATION:15},$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__x=a,this.__y=b;var c=this.$Lol.ICANHAZ?this.DURATION*4:this.DURATION,d=this.$Lol.ICANHAZ?8:1;if(this.$Random.nextBoolean())var e="enemyExplosion3.png";else var e="enemyExplosion4.png";this.__animation=new this.$Animation(games.shoot.AssetManager.getAsset(e),64,c,d)},$prototype:{build:function(){return new games.shoot.entity.Explosion(this.__animation,this.__x,this.__y)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/EnemyFormationBuilder.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.shoot.enemy.EnemyFormationBuilder",$interface:{build:function(){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/EnemyTypes.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.EnemyTypes",$statics:{GROUND:"ground",AIR:"air"}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/generator/DefaultEnemyGenerator.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.generator.DefaultEnemyGenerator",$extends:"games.common.BaseObject",$constructor:function(a,b,c){this.$BaseObject.constructor.call(this),this.__cooldown=a,this.__lastGenerationTime=0,this.__enemyFormationBuilder=b,this.__engine=c},$prototype:{update:function(a){a.getTotalGameTime()-this.__lastGenerationTime>this.__cooldown&&(this.__lastGenerationTime=a.getTotalGameTime(),(new this.__enemyFormationBuilder(this.__engine)).build())}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/generator/ShootEnemyGenerator.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.generator.ShootEnemyGenerator",$extends:"games.common.BaseObject",$dependencies:["games.shoot.enemy.doni.DoniFormationBuilder","games.shoot.enemy.vreu.VreuFormationBuilder","games.shoot.enemy.generator.DefaultEnemyGenerator"],$constructor:function(a){this.$BaseObject.constructor.call(this),this.__generators=[],this.__generators.push(new this.$DefaultEnemyGenerator(1e3,this.$DoniFormationBuilder,a)),this.__generators.push(new this.$DefaultEnemyGenerator(7e3,this.$VreuFormationBuilder,a))},$prototype:{update:function(a){for(var b=0;b<this.__generators.length;b++)this.__generators[b].update(a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/GroundEnemy.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.GroundEnemy",$dependencies:["games.shoot.enemy.EnemyTypes"],$extends:"games.common.entity.DestroyableEntity",$constructor:function(){this.$DestroyableEntity.constructor.call(this)},$prototype:{getType:function(){return this.$EnemyTypes.GROUND}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/movement/RandomMovementEngine.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.movement.RandomMovementEngine",$extends:"games.common.BaseObject",$dependencies:[],$implements:[],$constructor:function(a){this.$BaseObject.constructor.call(this)},$prototype:{}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/PhysicalEnemy.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.shoot.enemy.PhysicalEnemy",$extends:"games.common.entity.Entity",$interface:{getHitbox:function(){},hit:function(a){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/vreu/Vreu.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.vreu.Vreu",$implements:["games.common.entity.PhysicalEntity","games.shoot.enemy.PhysicalEnemy"],$dependencies:["games.common.hitbox.SquareHitbox","games.shoot.enemy.EnemyExplosionBuilder","games.common.sprite.AnimatedSpriteBuilder","games.shoot.entity.engine.PositionEngine","games.shoot.enemy.vreu.VreuScript","games.shoot.enemy.vreu.VreuGun","games.shoot.entity.loot.coin.Coin","games.shoot.utils.Environment","games.shoot.enemy.EnemyTypes"],$extends:"games.shoot.enemy.GroundEnemy",$statics:{DEFAULT_SPEED:.07,SIZE:18,LOOT_QTY:7,HIT_POINTS:3,DEFAULT_ANGLE:-Math.PI/2},$constructor:function(a,b,c){this.$GroundEnemy.constructor.call(this),this.__engine=a,this.__positionEngine=new this.$PositionEngine(b,c),this.__gun=new this.$VreuGun(this.getPositionEngine(),a),this.__script=new this.$VreuScript(this),this.__hits=0;var d={angle:this.DEFAULT_ANGLE,scale:{x:1,y:1}};b>=this.$Environment.BOARD.WIDTH&&(d.scale.x=-1),this.__animatedSprite=this.$AnimatedSpriteBuilder.buildFromUrlAndTransform("vreuAnimated3.png",46,30,games.shoot.AssetManager,d)},$prototype:{draw:function(a){this.__animatedSprite.draw(this.__positionEngine.getX(),this.__positionEngine.getY(),a),this.getHitbox().draw(a)},update:function(a){this.__script.update(a),this.__gun.update(a),this.__animatedSprite.update(a),this.__isOutOfBoardLimits()&&this.destroy()},getPositionEngine:function(){return this.__positionEngine},getGun:function(){return this.__gun},getSpeed:function(){return this.DEFAULT_SPEED},hit:function(a){this.__hits+=a,this.__hits>=this.HIT_POINTS&&this.destroy()},destroy:function(){this.$GroundEnemy.destroy.call(this),this.__engine.addEntity(this.$EnemyExplosionBuilder.forPosition(this.__positionEngine));for(var a=0;a<this.LOOT_QTY;a++)this.__engine.addEntity(new this.$Coin(this.__positionEngine.getX(),this.__positionEngine.getY()))},__isOutOfBoardLimits:function(){return this.__positionEngine.getY()>this.$Environment.BOARD.HEIGHT+50},getHitbox:function(){return new this.$SquareHitbox(this.__positionEngine.getX()-this.SIZE,this.__positionEngine.getY()-this.SIZE,2*this.SIZE,2*this.SIZE)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/vreu/VreuBullet.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.vreu.VreuBullet",$dependencies:["games.common.sprite.AnimatedSpriteBuilder"],$extends:"games.shoot.entity.AnimatedBullet",$constructor:function(a,b,c){var d=games.common.sprite.AnimatedSpriteBuilder.buildFromFramesheetUrlAndRotate("vreuBulletAnimated.png",12,60,games.shoot.AssetManager,c);this.$AnimatedBullet.constructor.call(this,a,b,c,d),this.__totalTime=0,this.__scale=0},$prototype:{update:function(a){this.__totalTime+=a,this.__scale<1&&(this.__scale=Math.min(1,this.__totalTime*.005)),this.$AnimatedBullet.update.call(this,a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/vreu/VreuFormationBuilder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.vreu.VreuFormationBuilder",$extends:"games.common.BaseObject",$implements:["games.shoot.enemy.EnemyFormationBuilder"],$dependencies:["games.shoot.enemy.vreu.Vreu","games.shoot.utils.Environment","games.common.math.Random"],$statics:{COUNT:3,INTERVAL:60},$constructor:function(a){this.$BaseObject.constructor.call(this),this.__engine=a,this.__yPos=this.$Random.nextInt(this.$Environment.BOARD.HEIGHT-400)+100,this.$Random.nextBoolean()?this.__start=-(this.COUNT*this.INTERVAL):this.__start=this.$Environment.BOARD.WIDTH+60},$prototype:{build:function(){for(var a=0;a<this.COUNT;a++)this.__addEnemyAtX(this.__start+this.INTERVAL*a)},__addEnemyAtX:function(a){var b=new this.$Vreu(this.__engine,a,this.__yPos+this.$Random.nextInt(20));this.__engine.addEntity(b)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/vreu/VreuGun.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.vreu.VreuGun",$extends:"games.common.BaseObject",$dependencies:["games.shoot.enemy.vreu.VreuBullet","games.common.math.Random","games.shoot.utils.Environment"],$implements:[],$statics:{BIG_COOLDOWN:4e3,COOLDOWN:150,CONSECUTIVE_SHOTS:3,BULLET_SPEED:.15},$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__timeSinceLastBullet=this.$Random.nextInt(1e3)-1e3,this.__shots=0,this.__positionEngine=a,this.__direction=a.getX()<=0,this.__engine=b,this.__angleVariant=this.$Random.nextInt(10)*.05},$prototype:{update:function(a){this.__isInGameZone()&&(this.__timeSinceLastBullet+=a)},fire:function(){this.__cooldownExpired()&&(this.__shots++,this.__createBulletPattern(),this.__shots==this.CONSECUTIVE_SHOTS?(this.__shots=0,this.__timeSinceLastBullet=-this.COOLDOWN-this.BIG_COOLDOWN):this.__timeSinceLastBullet=0)},__cooldownExpired:function(){return this.__timeSinceLastBullet>this.COOLDOWN},__createBulletPattern:function(){var a=this.__direction?5:-5,b=this.__positionEngine.getX()-a,c=this.__positionEngine.getY()-5;for(var d=0;d<12;d++){var e=d*(Math.PI/6)+this.__angleVariant,f=new this.$VreuBullet(b,c,e);f.setSpeed(this.BULLET_SPEED),f.setGroup(f.GROUPS.ENEMY),this.__engine.addEntity(f)}},__isInGameZone:function(){var a=this.__positionEngine.getX()>-10&&this.__positionEngine.getX()<this.$Environment.BOARD.WIDTH+10,b=this.__positionEngine.getY()>-10&&this.__positionEngine.getY()<this.$Environment.BOARD.HEIGHT+10;return b&&a}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/enemy/vreu/VreuScript.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.vreu.VreuScript",$extends:"games.common.BaseObject",$dependencies:["games.shoot.goal.GoMoveAndFire","games.common.math.Random","games.shoot.utils.Environment"],$constructor:function(a){this.$BaseObject.constructor.call(this),this.__vreu=a;var b=this.$Environment.BOARD.WIDTH;if(a.getPositionEngine().getX()<0)var c=b+50;else var c=-50;this.__goals=[new this.$GoMoveAndFire(a.getPositionEngine(),c,a.getPositionEngine().getY(),a.getSpeed(),a.getGun())],this.__goalIndex=0},$prototype:{update:function(a){var b=this.__getCurrentGoal();b?(b.update(a),b.isCompleted()&&this.__goalIndex++):this.__vreu.destroy()},__getCurrentGoal:function(){return this.__goals[this.__goalIndex]}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/engine/ExtendedEngine.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.shoot.engine.ExtendedEngine",$extends:"games.common.BaseObject",$implements:["games.common.engine.Engine"],$dependencies:["games.common.clock.Timer","games.common.engine.GameEngine"],$statics:{getDefaultImplementation:function(a){var b,c;return c=new games.common.clock.Timer(16),b=new games.common.engine.GameEngine(a,c),new games.shoot.engine.ExtendedEngine(b)}},$constructor:function(a){return this.baseEngine=a,this.controllers=[],this},$prototype:{getTimer:function(){return this.baseEngine.getTimer()},addEntity:function(a){return this.baseEngine.addEntity(a)},addController:function(a){return this.controllers.push(a)},update:function(){var a,b,c,d;d=this.controllers;for(b=0,c=d.length;b<c;b++)a=d[b],a.update();return this.baseEngine.update()},draw:function(){return this.baseEngine.draw()}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/engine/OverlayEngine.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.engine.OverlayEngine",$extends:"games.common.engine.GameEngine",$implements:["games.common.engine.Engine"],$dependencies:["games.shoot.overlay.Overlay"],$statics:{getDefaultImplementation:function(a,b){var c=new games.common.clock.Timer(80);return new games.shoot.engine.OverlayEngine(a,b,c)}},$constructor:function(a,b,c){this.$GameEngine.constructor.call(this,b,c),this.__overlayController=new this.$Overlay(this,a)},$prototype:{update:function(){this.__overlayController.update(),this.$GameEngine.update.call(this)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/engine/ShootEngine.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.engine.ShootEngine",$dependencies:["aria.utils.Array","games.common.assert.Assert","games.common.asset.AssetManager","games.common.engine.GameEngine","games.shoot.asset.Assets","games.shoot.collision.CollisionEngineImpl","games.shoot.entity.EntitySorter","games.shoot.entity.SpriteBoard","games.shoot.utils.Environment"],$extends:"games.common.BaseObject",$implements:["games.common.engine.Engine"],$statics:{getDefaultImplementation:function(a,b){var c=new games.common.clock.Timer(16),d=new games.common.engine.GameEngine(a,c);return new games.shoot.engine.ShootEngine(d,b)}},$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__baseEngine=a,this.__collisionEngine=this.$CollisionEngineImpl.getDefaultImplementation(),this.entitySorter=new this.$EntitySorter,this.__controllers=[],this.$Environment.setEngine(this);var c=new this.$SpriteBoard;this.addEntity(c),this.__stats=b},$prototype:{getTotalGameTime:function(){return this.getTimer().getTotalGameTime()},update:function(){this.__resolveCollisions();var a=Date.now();this.__updateControllers(),this.__baseEngine.update(),this.__stats.updateTime("update",Date.now()-a),this.__stats.updateEntities(this.getEntities().length)},addController:function(a){this.__controllers.push(a)},draw:function(){var a=Date.now();this.__baseEngine.setEntities(this.entitySorter.sort(this.getEntities())),this.__baseEngine.draw(),this.__stats.updateTime("draw",Date.now()-a)},getEntities:function(){return this.__baseEngine.getEntities()},addEntity:function(a){this.__baseEngine.addEntity(a)},getTimer:function(){return this.__baseEngine.getTimer()},__updateControllers:function(){for(var a=0;a<this.__controllers.length;a++)this.__controllers[a].update(this.getTimer())},__resolveCollisions:function(){var a=Date.now();this.__collisionEngine.resolveCollisions(this.getEntities()),this.__stats.updateTime("collide",Date.now()-a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/AnimatedBullet.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.AnimatedBullet",$extends:"games.shoot.entity.Bullet",$constructor:function(a,b,c,d,e){this.$Bullet.constructor.call(this,a,b),this.setAngle(c),this.__scale=e||1,this.__animatedSprite=d},$prototype:{update:function(a){this.$Bullet.update.call(this,a),this.__animatedSprite.update(a)},draw:function(a){this.__animatedSprite.draw(this.__x,this.__y,a,this.__scale),this.getHitbox().draw(a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/Board.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.Board",$implements:["games.common.entity.Entity"],$statics:{LINE_INTERVAL:30,DEFAULT_SPEED:.05},$constructor:function(){this.__firstHorizontalLinePosition=0},$prototype:{update:function(a){var b=this.DEFAULT_SPEED*a;this.__firstHorizontalLinePosition=(this.__firstHorizontalLinePosition+b)%this.LINE_INTERVAL},draw:function(a){a.strokeStyle="#bbb";var b=this.__firstHorizontalLinePosition;while(b<500)this.__drawHorizontalLine(a,b),b+=this.LINE_INTERVAL;var b=0;while(b<500)this.__drawVerticalLine(a,b),b+=this.LINE_INTERVAL},__drawHorizontalLine:function(a,b){a.beginPath(),a.moveTo(0,b),a.lineTo(600,b),a.stroke(),a.closePath()},__drawVerticalLine:function(a,b){a.beginPath(),a.moveTo(b,0),a.lineTo(b,600),a.stroke(),a.closePath()},destroy:function(){},isDestroyed:function(){return!1}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/Bullet.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.Bullet",$implements:["games.common.entity.PhysicalEntity"],$dependencies:["games.common.hitbox.SquareHitbox","games.shoot.utils.Environment"],$extends:"games.common.entity.DestroyableEntity",$statics:{ANGLE:0,SPEED:.1,RADIUS:3,COLOR:"black",GROUPS:{PLAYER:"BULLET.GROUPS:PLAYER",ENEMY:"BULLET.GROUPS:ENEMY"}},$constructor:function(a,b){this.$DestroyableEntity.constructor.call(this),this.__x=a,this.__y=b,this.__radialDistance=0,this.__angle=this.ANGLE,this.__speed=this.SPEED,this.__radius=this.RADIUS,this.__color=this.COLOR,this.__group=null,this.__hitbox=new this.$SquareHitbox(this.__x-this.__radius,this.__y-this.__radius,2*this.__radius,2*this.__radius)},$prototype:{update:function(a){this.__radialDistance=a*this.__speed,this.__x+=this.__radialDistance*Math.cos(this.__angle),this.__y+=this.__radialDistance*Math.sin(this.__angle),this.__updateHitbox(),this.__isOutOfBoardLimits()&&this.destroy()},draw:function(a){a.beginPath(),a.strokeStyle=this.__color,a.arc(this.__x,this.__y,this.__radius,0,Math.PI*2,!1),a.stroke(),a.closePath(),this.getHitbox().draw(a)},setAngle:function(a){this.__angle=a},setSpeed:function(a){this.__speed=a},setRadius:function(a){this.__radius=a,this.__updateHitbox()},setColor:function(a){this.__color=a},setGroup:function(a){this.__group=a},isPlayerBullet:function(){return this.__group==this.GROUPS.PLAYER},isEnemyBullet:function(){return this.__group==this.GROUPS.ENEMY},getHitbox:function(){return this.__hitbox},__updateHitbox:function(){this.__hitbox.x=this.__x-this.__radius,this.__hitbox.y=this.__y-this.__radius,this.__hitbox.height=this.__hitbox.width=2*this.__radius},__isOutOfBoardLimits:function(){var a=this.__y<-10||this.__y>this.$Environment.BOARD.HEIGHT+10,b=this.__x<-10||this.__x>this.$Environment.BOARD.WIDTH+10;return b||a}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/DefaultForceSensitiveEntity.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.DefaultForceSensitiveEntity",$extends:"games.shoot.entity.PositionedEntity",$constructor:function(a,b){this.$PositionedEntity.constructor.call(this,a,b)},$prototype:{addForce:function(){},removeForce:function(){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/engine/ConstantAccelerationEngine.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.engine.ConstantAccelerationEngine",$extends:"games.common.BaseObject",$dependencies:[],$implements:[],$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__acceleration=a,this.__maxSpeed=b,this.__xspeed=0,this.__yspeed=0},$prototype:{setMaxSpeed:function(a){this.__maxSpeed=a},getXSpeed:function(){return this.__xspeed},getYSpeed:function(){return this.__yspeed},goRight:function(a){this.__xspeed=Math.max(this.__xspeed,0),this.__xspeed=Math.min(this.__xspeed+this.__acceleration*(a/1e3),this.__maxSpeed)},goLeft:function(a){this.__xspeed=Math.min(this.__xspeed,0),this.__xspeed=Math.max(this.__xspeed-this.__acceleration*(a/1e3),-1*this.__maxSpeed)},goUp:function(a){this.__yspeed=Math.min(this.__yspeed,0),this.__yspeed=Math.max(this.__yspeed-this.__acceleration*(a/1e3),-1*this.__maxSpeed)},goDown:function(a){this.__yspeed=Math.max(this.__yspeed,0),this.__yspeed=Math.min(this.__yspeed+this.__acceleration*(a/1e3),this.__maxSpeed)},stopY:function(){this.__yspeed=0},stopX:function(){this.__xspeed=0}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/engine/MovementEngine.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.shoot.entity.engine.MovementEngine",$interface:{getXSpeed:function(){},getYSpeed:function(){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/engine/PositionEngine.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.engine.PositionEngine",$extends:"games.common.BaseObject",$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__x=a,this.__y=b},$prototype:{getX:function(){return this.__x},getY:function(){return this.__y},setX:function(a){this.__x=a},setY:function(a){this.__y=a}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/EntitySorter.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.EntitySorter",$extends:"games.common.BaseObject",$dependencies:["games.shoot.utils.GameType"],$constructor:function(){this.$BaseObject.constructor.call(this)},$prototype:{sort:function(a){var b=this.splitEntitiesInLayers(a),c=[];for(var d=0;d<b.length;d++)b[d]&&(c=c.concat(b[d]));return c},splitEntitiesInLayers:function(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c],e=this.getLayerForEntity(d);b[e]=b[e]||[],b[e].push(d)}return b},getLayerForEntity:function(a){var b=this.$GameType;return b.isBoard(a)?0:b.isGroundEnemy(a)?2:b.isLoot(a)?3:b.isBeam(a)?4:b.isAirEnemy(a)?5:b.isExplosion(a)?6:b.isShip(a)?7:b.isBullet(a)?8:b.isOverlay(a)?9:1}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/Explosion.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.Explosion",$extends:"games.common.entity.DestroyableEntity",$dependencies:["games.common.animation.Animation"],$implements:["games.common.entity.Entity"],$constructor:function(a,b,c){this.$DestroyableEntity.constructor.call(this),this.__animation=a,this.__x=b,this.__y=c},$prototype:{update:function(a){this.__animation.update(a),this.__animation.isFinished()&&this.destroy()},draw:function(a){this.__animation.draw(a,this.__x,this.__y)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/ForceSensitiveEntity.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.shoot.entity.ForceSensitiveEntity",$interface:{addForce:function(a,b){},removeForce:function(a){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/loot/coin/Coin.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.loot.coin.Coin",$extends:"games.shoot.entity.loot.LootImpl",$dependencies:["games.common.sprite.AnimatedSpriteBuilder","games.common.sprite.BlinkingSprite"],$implements:["games.shoot.entity.loot.Loot","games.shoot.entity.TractableEntity"],$statics:{SIZE:20,EXPIRATION_TIME:7e3,SPEED:{X:0,Y:.2},INITIAL_SPEED:.7,VALUE:500},$prototype:{_createSprite:function(){var a={angle:-Math.PI/2,scale:{x:1,y:1}},b=this.$AnimatedSpriteBuilder.buildFromUrlAndTransform("coinAnimated.png",20,180,games.shoot.AssetManager,a);return new this.$BlinkingSprite(b,100)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/loot/coin/CoinScript.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.enemy.doni.DoniScript",$extends:"games.common.BaseObject",$dependencies:["games.shoot.goal.GoMove","games.common.math.Random"],$constructor:function(a){this.$BaseObject.constructor.call(this),this.__doni=doni,this.__goals=[new this.$GoMove(a,a.getX()+20,a.getY(),1),new this.$GoMove(a,null,600,.05)],this.__goalIndex=0},$prototype:{update:function(a){var b=this.__getCurrentGoal();b&&(b.update(a),b.isCompleted()&&this.__goalIndex++)},__getCurrentGoal:function(){return this.__goals[this.__goalIndex]}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/loot/Loot.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.shoot.entity.loot.Loot",$extends:"games.common.entity.PhysicalEntity",$interface:{getValue:function(){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/loot/LootImpl.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.loot.LootImpl",$extends:"games.shoot.entity.PositionedEntity",$dependencies:["games.common.hitbox.SquareHitbox","games.common.sprite.BlinkingSprite","games.shoot.utils.Environment","games.common.math.Random","games.shoot.utils.Speed","games.common.math.GameMath"],$implements:["games.shoot.entity.loot.Loot"],$constructor:function(a,b,c){this.$PositionedEntity.constructor.call(this,a,b),this.__totalTime=0;var d=.5+Math.random()/2;this.__initialSpeed=d*(typeof c!="undefined"?c:this.INITIAL_SPEED),this.__initializeForces(),this.__blinkingSprite=this._createSprite()},$prototype:{update:function(a){this.__totalTime+=a,this.__updatePosition(a),this.__updateSprite(a),(this.__isOutOfBoard()||this.__hasExpired())&&this.destroy()},draw:function(a){this.__blinkingSprite.draw(this.getX(),this.getY(),a),this.getHitbox().draw(a)},getHitbox:function(){var a=this.SIZE*2;return new this.$SquareHitbox(this.getX()-a/2,this.getY()-a/2,a,a)},getValue:function(){return this.VALUE},setAttractionForce:function(a){this.__attractionForce=a},__initializeForces:function(){var a=Math.random()*2*Math.PI;this.__initialForce={x:this.$Random.polarize(this.__initialSpeed*Math.cos(a)),y:this.$Random.polarize(this.__initialSpeed*Math.sin(a)),ratio:a},this.__attractionForce={x:0,y:0}},_createSprite:function(){throw new Error("_createSprite is abstract")},__isOutOfBoard:function(){return this.__y>this.$Environment.BOARD.HEIGHT+this.SIZE},__hasExpired:function(){return this.EXPIRATION_TIME<this.__totalTime},__updateForces:function(a){var b=3*a/1e3,c=this.__initialForce.ratio;this.__initialForce.x=this.$GameMath.normalizeFromToWithDelta(this.__initialForce.x,0,b*Math.cos(c)),this.__initialForce.y=this.$GameMath.normalizeFromToWithDelta(this.__initialForce.y,0,b*Math.sin(c)),this.__attractionForce={x:0,y:0}},__updatePosition:function(a){this.__x+=(this.__initialForce.x+this.__attractionForce.x+this.SPEED.X)*a,this.__y+=(this.__initialForce.y+this.__attractionForce.y+this.SPEED.Y)*a,this.__updateForces(a)},__updateSprite:function(a){this.__blinkingSprite.update(a),this.__hasAlmostExpired()&&this.__blinkingSprite.setBlinking(!0)},__hasAlmostExpired:function(){return this.EXPIRATION_TIME/1.5<this.__totalTime}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/loot/powerup/Power.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.loot.powerup.Power",$extends:"games.shoot.entity.loot.LootImpl",$dependencies:["games.common.sprite.AnimatedSpriteBuilder","games.common.sprite.BlinkingSprite"],$implements:["games.shoot.entity.loot.Loot","games.shoot.entity.TractableEntity"],$statics:{SIZE:20,EXPIRATION_TIME:7e3,SPEED:{X:0,Y:.05},INITIAL_SPEED:.4,VALUE:2e3},$prototype:{_createSprite:function(){var a=this.$AnimatedSpriteBuilder.buildFromFramesheetUrlAndRotate("powerupanimated.png",20,120,games.shoot.AssetManager,-Math.PI/2);return new this.$BlinkingSprite(a,100)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/PositionedEntity.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.PositionedEntity",$extends:"games.common.entity.DestroyableEntity",$constructor:function(a,b){this.$DestroyableEntity.constructor.call(this),this.__x=a,this.__y=b},$prototype:{getX:function(){return this.__x},getY:function(){return this.__y}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/SpriteBoard.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.entity.SpriteBoard",$extends:"games.common.entity.DestroyableEntity",$dependencies:["games.common.sprite.SpritePattern","games.shoot.utils.Environment"],$implements:["games.common.entity.Entity"],$statics:{DEFAULT_SPEED:.05,SPRITE_HEIGHT:1e3},$constructor:function(){this.$DestroyableEntity.constructor.call(this);if(window.location.href.toLowerCase().indexOf("original")!=-1)var a="backgroundBig.png";else var a="backgroundBigJungle.png";this.__spritePattern=this.$SpritePattern.buildForSpriteUrl(a,games.shoot.AssetManager),this.__spritePattern.setSpriteHeight(this.SPRITE_HEIGHT),this.__startY=-this.SPRITE_HEIGHT},$prototype:{update:function(a){var b=this.DEFAULT_SPEED*a;this.__startY=(this.__startY+b)%this.SPRITE_HEIGHT-this.SPRITE_HEIGHT},draw:function(a){this.__spritePattern.draw(this.$Environment.BOARD.WIDTH/2,this.__startY,800,a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/entity/TractableEntity.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.shoot.entity.TractableEntity",$interface:{setAttractionForce:function(a){}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/goal/GoFire.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.goal.GoFire",$extends:"games.common.BaseObject",$dependencies:[],$implements:["games.common.goal.Goal"],$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__gun=a,this.__delay=b||0,this.__timeLastFire=0},$prototype:{update:function(a){this.__timeLastFire+=a,this.__timeLastFire>this.__delay&&(this.__timeLastFire=0,this.__gun.fire())},isCompleted:function(){return!1}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/goal/GoMove.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.goal.GoMove",$implements:["games.common.goal.Goal"],$dependencies:["games.shoot.utils.Speed"],$extends:"games.common.BaseObject",$statics:{SPEED:.2},$constructor:function(a,b,c,d){this.$BaseObject.constructor.call(this),this.__positionEngine=a,this.__endX=b,this.__endY=c,this.__speed=d||this.SPEED},$prototype:{update:function(a){this.__updatePolarity();var b=this.$Speed.getSpeedXYForLineTrajectory(this.__positionEngine.getX(),this.__positionEngine.getY(),this.__endX,this.__endY,this.__speed);this.__positionEngine.setX(this.__positionEngine.getX()+a*b.x),this.__positionEngine.setY(this.__positionEngine.getY()+a*b.y)},isCompleted:function(){return this.__polarityX*this.__positionEngine.getX()>this.__polarityX*this.__endX||this.__polarityY*this.__positionEngine.getY()>this.__polarityY*this.__endY},setSpeed:function(a){this.__speed=a},__updatePolarity:function(){this.__polarityX=this.__endX>=this.__positionEngine.getX()?1:-1,this.__polarityY=this.__endY>=this.__positionEngine.getY()?1:-1}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/goal/GoMoveAndFire.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.goal.GoMoveAndFire",$extends:"games.shoot.goal.GoMove",$dependencies:["games.shoot.goal.GoFire","games.shoot.utils.Speed"],$implements:["games.common.goal.Goal"],$constructor:function(a,b,c,d,e,f){this.$GoMove.constructor.call(this,a,b,c,d),this.__positionEngine=a,this.__goFire=new this.$GoFire(e,f||0)},$prototype:{update:function(a){this.__updatePolarity();var b=this.$Speed.getSpeedXYForLineTrajectory(this.__positionEngine.getX(),this.__positionEngine.getY(),this.__endX,this.__positionEngine.getY(),this.__speed);this.__positionEngine.setX(this.__positionEngine.getX()+a*b.x),this.__positionEngine.setY(this.__positionEngine.getY()+a*.05),this.__goFire.update(a)},isCompleted:function(){return this.__polarityX*this.__positionEngine.getX()>this.__polarityX*this.__endX}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/goal/GoWait.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.goal.GoWait",$extends:"games.common.BaseObject",$dependencies:[],$implements:["games.common.goal.Goal"],$constructor:function(a){this.$BaseObject.constructor.call(this),this.__waitedFor=0,this.__waitingTime=a},$prototype:{update:function(a){this.__waitedFor+=a},isCompleted:function(){return this.__waitedFor>=this.__waitingTime}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/goal/GoWaitAndFire.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.goal.GoWaitAndFire",$extends:"games.common.BaseObject",$dependencies:["games.shoot.goal.GoWait","games.shoot.goal.GoFire"],$implements:["games.common.goal.Goal"],$constructor:function(a,b,c){this.$BaseObject.constructor.call(this),this.__goWait=new this.$GoWait(a),this.__goFire=new this.$GoFire(b,c||0)},$prototype:{update:function(a){this.__goWait.update(a),this.__goFire.update(a)},isCompleted:function(){return this.__goWait.isCompleted()}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/overlay/Highscore.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.overlay.Highscore",$extends:"games.common.text.Text",$implements:["games.shoot.overlay.OverlayEntity"],$dependencies:["games.shoot.utils.Environment"],$statics:{FONT_SIZE:"16pt",FONT_COLOR:"#ddf",FONT_FAMILY:"Game"},$constructor:function(){this.$Text.constructor.call(this,this.FONT_FAMILY,this.FONT_SIZE,this.FONT_COLOR,"right"),this.setContent("0")},$prototype:{setContent:function(a){this.$Text.setContent.call(this,"HIGHSCORE : "+a)},draw:function(a){this.$Text.draw.call(this,this.$Environment.BOARD.WIDTH-25,20,a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/overlay/Overlay.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.overlay.Overlay",$extends:"games.common.BaseObject",$dependencies:["games.shoot.overlay.Points","games.shoot.overlay.Highscore","games.shoot.overlay.PowerupCountdown"],$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__player=b,this.__engine=a,this.__points=new this.$Points,this.__highscore=new this.$Highscore,this.__powerupCountdown=new this.$PowerupCountdown,this.__engine.addEntity(this.__points),this.__engine.addEntity(this.__highscore),this.__engine.addEntity(this.__powerupCountdown)},$prototype:{update:function(){this.__points.setContent(this.__player.getPoints()),this.__highscore.setContent(this.__player.getHighscore()),this.__powerupCountdown.setContent(this.__player.getPowerupCountdown())}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/overlay/OverlayEntity.js
//kj0U8ZfQ5x
Aria.interfaceDefinition({$classpath:"games.shoot.overlay.OverlayEntity",$extends:"games.common.entity.Entity"});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/overlay/Pause.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.overlay.Pause",$extends:"games.common.entity.DestroyableEntity",$dependencies:["games.shoot.utils.Environment","games.common.text.Text"],$implements:["games.shoot.overlay.OverlayEntity"],$statics:{BLINKING_INTERVAL:600},$constructor:function(){this.$DestroyableEntity.constructor.call(this),this.__text=new this.$Text("Game","24pt","white","center","middle"),this.__text.setContent("Pause"),this.__elapsedTime=0},$prototype:{update:function(a){this.__elapsedTime+=a},draw:function(a){a.beginPath(),a.fillStyle="rgba(0, 0, 0, 0.5)",a.fillRect(0,0,this.$Environment.BOARD.WIDTH,this.$Environment.BOARD.HEIGHT),a.stroke(),a.closePath(),this.__elapsedTime%(this.BLINKING_INTERVAL*2)<this.BLINKING_INTERVAL&&this.__text.draw(this.$Environment.BOARD.WIDTH/2,this.$Environment.BOARD.HEIGHT/2,a)},destroy:function(){this.__text.destroy(),this.$DestroyableEntity.destroy.call(this)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/overlay/PlusPoints.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.shoot.overlay.PlusPoints",$extends:"games.common.text.Text",$statics:{FONT_SIZE:"24pt",FONT_COLOR_RGB:"170,170,255",FONT_FAMILY:"Game"},$constructor:function(a,b,c){return this.$Text.constructor.call(this,this.FONT_FAMILY,this.FONT_SIZE,this.FONT_COLOR,"right"),this.setContent("+"+c)}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/overlay/Points.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.overlay.Points",$extends:"games.common.text.Text",$implements:["games.shoot.overlay.OverlayEntity"],$statics:{FONT_SIZE:"24pt",FONT_COLOR:"#ff8",FONT_FAMILY:"Game"},$dependencies:["games.shoot.utils.Environment"],$constructor:function(){this.$Text.constructor.call(this,this.FONT_FAMILY,this.FONT_SIZE,this.FONT_COLOR,"right"),this.setContent("0")},$prototype:{draw:function(a){this.$Text.draw.call(this,this.$Environment.BOARD.WIDTH-25,this.$Environment.BOARD.HEIGHT-50,a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/overlay/PowerupCountdown.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.overlay.PowerupCountdown",$implements:["games.shoot.overlay.OverlayEntity"],$extends:"games.common.BaseObject",$dependencies:["games.shoot.utils.Environment","games.common.text.Text"],$statics:{FONT_SIZE:"12pt",FONT_COLOR:"#adf",FONT_FAMILY:"Game"},$constructor:function(){this.$BaseObject.constructor.call(this),this.bullets=new this.$Text(this.FONT_FAMILY,this.FONT_SIZE,this.FONT_COLOR,"left"),this.charge=new this.$Text(this.FONT_FAMILY,this.FONT_SIZE,this.FONT_COLOR,"left")},$prototype:{setContent:function(a){if(a){this.bullets.setContent("Bullets : "+a.count);var b=Math.ceil((a.totalTime-a.time)/a.totalTime*100);this.charge.setContent("Charge : "+b)}else this.bullets.setContent(""),this.charge.setContent("")},update:function(a){this.bullets.update(a),this.charge.update(a)},isDestroyed:function(){return this.bullets.isDestroyed()&&this.charge.isDestroyed()},destroy:function(){this.bullets.destroy()&&this.charge.destroy()},draw:function(a){this.bullets.draw(25,20,a),this.charge.draw(25,50,a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/overlay/Welcome.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.overlay.Welcome",$extends:"games.common.BaseObject",$implements:["games.shoot.overlay.OverlayEntity"],$constructor:function(){this.$BaseObject.constructor.call(this)}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/player/PlayerController.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.player.PlayerController",$extends:"games.common.BaseObject",$dependencies:["games.common.assert.Assert","games.shoot.ship.Ship","games.shoot.ship.ShipInputRecorder"],$statics:{RESTART_INTERVAL:2e3},$constructor:function(a){this.$BaseObject.constructor.call(this),this.__engine=a,this.__shipDestroyedTimestamp=-this.RESTART_INTERVAL,this.__points=0,this.__highscore=0},$prototype:{update:function(){!this.__ship&&this.__isShipCreationCooldownOver()&&this.__createShip()},getPoints:function(){return this.__points},getHighscore:function(){return this.__highscore},getPowerupCountdown:function(){if(this.__ship)return this.__ship.__defaultGun.getPowerupStatus()},__isShipCreationCooldownOver:function(){return this.__engine.getTotalGameTime()>this.__shipDestroyedTimestamp+this.RESTART_INTERVAL},__createShip:function(){this.__ship=new this.$Ship(this.__engine,this),this.__ship.setInvincible(),this.__engine.addEntity(this.__ship),this.on(this.__ship,"lootCollected",this.__onLootCollectedByShip),this.on(this.__ship,"destroyed",this.__onShipDestroyed)},__onLootCollectedByShip:function(a){this.__points+=a.loot.getValue(),this.__updateHighscore(this.__points)},__onShipDestroyed:function(){this.__shipDestroyedTimestamp=this.__engine.getTotalGameTime(),this.__ship=null,this.__points=0},__updateHighscore:function(a){this.__highscore=Math.max(this.__highscore,a)}},$destructor:function(){this.$BaseObject.constructor.call(this)}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/Beam.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ship.Beam",$extends:"games.common.entity.DestroyableEntity",$dependencies:["games.common.hitbox.SquareHitbox","games.common.sprite.SpritePattern","games.common.sprite.AnimatedSpriteBuilder","games.shoot.entity.engine.ConstantAccelerationEngine","games.shoot.utils.Lol"],$implements:["games.common.entity.PhysicalEntity"],$statics:{WIDTH:60,HEIGHT:30,MAX_SPEED:.8,ACCELERATION:2},$constructor:function(a,b){this.$DestroyableEntity.constructor.call(this),this.updateOrigin(a,b);var c=this.$Lol.ICANHAZ?3:1;this.WIDTH=c*this.WIDTH,this.HALF_WIDTH=this.WIDTH/2,this.__y=this.__startY-this.HEIGHT,this.__released=!1,this.__accelerationEngine=new this.$ConstantAccelerationEngine(this.ACCELERATION,this.MAX_SPEED),this.__bottomSprite=this.$AnimatedSpriteBuilder.buildFromUrlAndTransform("beamBottomAnimatedSmall.png",45,80,games.shoot.AssetManager,{angle:-Math.PI/2,scale:{x:c,y:1}}),this.__bodySpritePattern=this.$SpritePattern.buildForSpriteUrl("shipBeam.png",games.shoot.AssetManager),this.__bodySpritePattern.rotate(-Math.PI/2),this.__bodySpritePattern.scale(c)},$prototype:{update:function(a){this.__bottomSprite.update(a),this.__accelerationEngine.goUp(a);var b=this.__accelerationEngine.getYSpeed();this.__released&&this.destroy(),this.__y-b*a<-100?this.__y=this.HEIGHT+5+this.__y-b*a:this.__y=this.__y+b*a},release:function(){this.destroy()},updateOrigin:function(a,b){this.__startY=b,this.__startX=a},draw:function(a){this.__drawBody(a),this.__drawBottom(a),this.getHitbox().draw(a)},__drawBottom:function(a){this.__bottomSprite.draw(this.__startX,this.__startY-this.HEIGHT+5,a,2)},__drawBody:function(a){var b=this.__startX,c=this.__startY-this.HEIGHT;this.__bodySpritePattern.draw(b,this.__y,c,a)},collideWithHitbox:function(a){this.__y=a.y+a.height,this.__accelerationEngine.stopY()},getHitbox:function(){return new this.$SquareHitbox(this.__startX-this.HALF_WIDTH,this.__y,this.WIDTH,this.__startY-this.__y)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/BeamGun.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ship.BeamGun",$extends:"games.common.BaseObject",$dependencies:["games.shoot.ship.Beam"],$implements:[],$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__beamingSpeed=b,this.__engine=a,this.__beam=null},$prototype:{fire:function(a,b){this.__isBeaming()||(this.__beam=new this.$Beam(a,b),this.__engine.addEntity(this.__beam)),this.__beam.updateOrigin(a,b)},halt:function(){this.__isBeaming()&&(this.__beam.release(),this.__beam=null)},destroy:function(){this.halt()},__isBeaming:function(){return this.__beam!==null}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/CollectedPoints.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ship.CollectedPoints",$extends:"games.common.text.Text",$implements:["games.shoot.overlay.OverlayEntity"],$statics:{FONT_SIZE:"12pt",RGB:"170,170,255",FONT_FAMILY:"Game",SPEED:.05,DIST_Y:50},$constructor:function(a,b,c){this.$Text.constructor.call(this,this.FONT_FAMILY,this.FONT_SIZE,this.getColorForAlpha(1),"center"),this.setContent("+"+c),this.__x=a,this.__y=b-30,this.__minY=this.__y-this.DIST_Y,this.__speed=this.SPEED},$prototype:{update:function(a){this.__y-=this.__speed*a;var b=this.__y-this.__minY;if(b>0){var c=b/this.DIST_Y;this.setColor(this.getColorForAlpha(c))}else this.destroy()},draw:function(a){this.$Text.draw.call(this,this.__x,this.__y,a)},getColorForAlpha:function(a){return a=Math.max(0,a),"rgba("+this.RGB+","+a+")"}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/ConstantSpeedMovementEngine.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ship.ConstantSpeedMovementEngine",$extends:"games.common.BaseObject",$dependencies:["games.common.assert.Assert"],$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__recorder=this.$Assert.isInstanceOf(a,"games.common.input.InputRecorder"),this.__maxSpeed=b},$prototype:{update:function(a){this.__hasInput("up")?this.__goUp():this.__hasInput("down")?this.__goDown():this.__yspeed=0,this.__hasInput("left")?this.__goLeft():this.__hasInput("right")?this.__goRight():this.__xspeed=0},setMaxSpeed:function(a){this.__maxSpeed=a},getXSpeed:function(){return this.__xspeed},getYSpeed:function(){return this.__yspeed},__hasInput:function(a){return!!this.__recorder.getInputByCode(a)},__goRight:function(){this.__xspeed=this.__maxSpeed},__goLeft:function(){this.__xspeed=-1*this.__maxSpeed},__goUp:function(){this.__yspeed=-1*this.__maxSpeed},__goDown:function(){this.__yspeed=this.__maxSpeed}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/DefaultShipGun.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ship.DefaultShipGun",$extends:"games.common.BaseObject",$dependencies:["games.shoot.ship.ShipBullet","games.shoot.entity.loot.powerup.Power","games.shoot.utils.Lol"],$statics:{MAX_BULLETS:10,INITIAL_BULLETS:3,POWERDOWN_DELAY:2e3},$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__engine=a,this.__timeLastBulletWasFired=0,this.__bulletInterval=b,this.__bulletCount=this.INITIAL_BULLETS,this.__powerDownTime=0},$prototype:{fire:function(a,b){this.__calculateTimeSinceLastBullet()>this.__bulletInterval&&(this.__timeLastBulletWasFired=this.__getGameTimeUntilNow(),this.__createBulletPattern(a,b))},update:function(a){this.__bulletCount>this.INITIAL_BULLETS&&(this.__powerDownTime+=a,this.__powerDownTime>this.INITIAL_BULLETS*this.POWERDOWN_DELAY/this.__bulletCount&&this.powerdown())},getPowerupStatus:function(){var a={count:this.getBulletCount(),time:this.__powerDownTime,totalTime:this.INITIAL_BULLETS*this.POWERDOWN_DELAY/this.__bulletCount};return a},getBulletCount:function(){return this.$Lol.ICANHAZ?40:this.__bulletCount},halt:function(){},destroy:function(){},powerup:function(){this.__bulletCount=Math.min(this.MAX_BULLETS,this.__bulletCount+1),this.__powerDownTime=0},powerdown:function(){this.__bulletCount=Math.max(this.INITIAL_BULLETS,this.__bulletCount-1),this.__powerDownTime=0},__createBulletPattern:function(a,b){var c=this.getBulletCount(),d=this.$Lol.ICANHAZ?40:this.MAX_BULLETS,e=-Math.PI/2-(c-1)*Math.PI/d;for(var f=0;f<c;f++)this.__createBullet(a,b,e+f*2*Math.PI/d)},__createBullet:function(a,b,c){var d=new this.$ShipBullet(a,b,c);this.__engine.addEntity(d)},__calculateTimeSinceLastBullet:function(){return this.__getGameTimeUntilNow()-this.__timeLastBulletWasFired},__getGameTimeUntilNow:function(){return this.__engine.getTimer().getTotalGameTime()}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/Magnet.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ship.Magnet",$extends:"games.common.entity.DestroyableEntity",$dependencies:["games.common.hitbox.SquareHitbox","games.shoot.utils.Speed","games.common.math.Pythagore"],$implements:["games.common.entity.PhysicalEntity"],$constructor:function(a){this.$DestroyableEntity.constructor.call(this),this.__radius=a,this.setXY(0,0)},$prototype:{setXY:function(a,b){this.__x=a,this.__y=b},getHitbox:function(){var a=this.__radius;return new this.$SquareHitbox(this.__x-a/2,this.__y-a/2,a,a)},getX:function(){return this.__x},getY:function(){return this.__y},getRadius:function(){return this.__radius},tractEntity:function(a){var b=this.getX(),c=this.getY(),d=this.$Pythagore.calculateDiag(a.getX()-b,a.getY()-c),e=1-d/this.getRadius(),f=this.$Speed.getSpeedXYForLineTrajectory(a.getX(),a.getY(),b,c,.25+e*.15);a.setAttractionForce(f)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/Ship.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ship.Ship",$implements:["games.common.entity.PhysicalEntity"],$dependencies:["aria.utils.Math","games.common.utils.UserAgent","games.common.hitbox.SquareHitbox","games.common.sprite.AnimatedSpriteBuilder","games.common.sprite.Sprite","games.shoot.entity.loot.powerup.Power","games.shoot.ship.BeamGun","games.shoot.ship.CollectedPoints","games.shoot.ship.DefaultShipGun","games.shoot.ship.Magnet","games.shoot.ship.ShipExplosionBuilder","games.shoot.ship.ShipMovementEngine","games.shoot.ship.ShipPilot","games.shoot.ship.TouchShipPilot","games.shoot.utils.Environment","games.shoot.utils.GameType"],$extends:"games.common.entity.DestroyableEntity",$statics:{DEFAULT_BULLET_INTERVAL:60,BEAM_DELAY:300,DEFAULT_SPEED:.3,BEAMING_SPEED:.15,HITBOX_SIZE:10},$events:{lootCollected:"Fired when the ship collected a loot",destroyed:"Notify listeners of entity destruction"},$constructor:function(a){this.$DestroyableEntity.constructor.call(this),this.__engine=a,this.$UserAgent.isTouchDevice()?this.__shipPilot=new this.$TouchShipPilot(this):this.__shipPilot=new this.$ShipPilot(this),this.__x=this.$Environment.BOARD.WIDTH/2-this.HITBOX_SIZE,this.__y=this.$Environment.BOARD.HEIGHT-2*this.HITBOX_SIZE,this.__firingTime=0,this.__movementEngine=new this.$ShipMovementEngine(this.DEFAULT_SPEED),this.__defaultGun=new this.$DefaultShipGun(this.__engine,this.DEFAULT_BULLET_INTERVAL),this.__beamGun=new this.$BeamGun(this.__engine,this.BEAMING_SPEED),this.__magnet=new this.$Magnet(this.HITBOX_SIZE*10),this.__engine.addEntity(this.__magnet),this.__spriteRegular=this.$Sprite.buildForSpriteUrl("shipBis.png",-Math.PI/2,games.shoot.AssetManager),this.__spriteLeft=this.$Sprite.buildForSpriteUrl("shipLeftBis.png",-Math.PI/2,games.shoot.AssetManager),this.__spriteRight=this.$Sprite.buildForSpriteUrl("shipRightBis.png",-Math.PI/2,games.shoot.AssetManager),this.__invincibilityShieldSprite=this.$AnimatedSpriteBuilder.buildFromFramesheetUrlAndRotate("invincibilityShieldAnimated.png",30,120,games.shoot.AssetManager,0),this.__gun=this.__defaultGun},$prototype:{update:function(a){this.__shipPilot.update(a),this.__updatePosition(a),this.__invincible&&this.__updateInvincibility(a),this.__updateMagnet(),this.__defaultGun.update(a)},__getCurrentSprite:function(){return this.__movementEngine.getXSpeed()>0?this.__spriteRight:this.__movementEngine.getXSpeed()<0?this.__spriteLeft:this.__spriteRegular},draw:function(a){this.__getCurrentSprite().draw(this.__x,this.__y,a,1),this.__invincible&&this.__invincibilityShieldSprite.draw(this.__x,this.__y,a,1.5),this.getHitbox().draw(a)},destroy:function(){if(!this.__invincible){this.$DestroyableEntity.destroy.call(this),this.__engine.addEntity(this.$ShipExplosionBuilder.forXY(this.__x,this.__y)),this.__beamGun.destroy();for(var a=0;a<this.__defaultGun.getBulletCount();a++)this.__engine.addEntity(new this.$Power(this.__x,this.__y,.6));this.__defaultGun.destroy(),this.__magnet.destroy(),this.$raiseEvent({name:"destroyed"})}},getHitbox:function(){var a=this.HITBOX_SIZE;return this.__invincible&&(a*=3),new this.$SquareHitbox(this.__x-a/2,this.__y-a/2,a,a)},getX:function(){return this.__x},getY:function(){return this.__y},setInvincible:function(){this.__invincible=!0,this.__invincibleStartTime=this.__getTotalGameTime()},collect:function(a){this.$GameType.isPowerUp(a)&&(this.__defaultGun.powerup(),this.__engine.addEntity(new this.$CollectedPoints(this.__x,this.__y,a.getValue()))),this.__engine.addEntity(new this.$CollectedPoints(this.__x,this.__y,a.getValue())),this.$raiseEvent({name:"lootCollected",loot:a})},fire:function(a){this.__firingTime+=a,this.__firingTime>this.BEAM_DELAY&&(this.__gun=this.__beamGun),this.__gun.fire(this.__x,this.__y-25,a)},haltFire:function(){this.__firingTime=0,this.__gun.halt(),this.__gun=this.__defaultGun},move:function(a,b){this.__isUsingBeamGun()?this.__movementEngine.setMaxSpeed(this.BEAMING_SPEED):this.__movementEngine.setMaxSpeed(this.DEFAULT_SPEED),this.__movementEngine.update(a,b)},__getTotalGameTime:function(){return this.__engine.getTimer().getTotalGameTime()},__updateInvincibility:function(a){this.__invincibilityShieldSprite.update(a),this.__getTotalGameTime()-this.__invincibleStartTime>1500?this.__invincibilityShieldSprite.__frameDuration=30:this.__invincibilityShieldSprite.__frameDuration=90,this.__getTotalGameTime()-this.__invincibleStartTime>2e3&&(this.__invincible=!1)},__updatePosition:function(a){var b=this.__x+a*this.__movementEngine.getXSpeed();this.__x=this.$Math.normalize(b,10,this.$Environment.BOARD.WIDTH-10);var c=this.__y+a*this.__movementEngine.getYSpeed();this.__y=this.$Math.normalize(c,10,this.$Environment.BOARD.HEIGHT-10)},__updateMagnet:function(){this.__magnet.setXY(this.__x,this.__y)},__isUsingBeamGun:function(){return this.__gun==this.__beamGun},__hasInput:function(a){return this.__inputRecorder.getInputByCode(a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/ShipBullet.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ship.ShipBullet",$dependencies:["games.common.sprite.Sprite"],$extends:"games.shoot.entity.Bullet",$statics:{SPEED:.5,RADIUS:3},$constructor:function(a,b,c){this.$Bullet.constructor.call(this,a,b),this.setSpeed(this.SPEED),this.setRadius(this.RADIUS),this.setAngle(c),this.setGroup(this.$Bullet.GROUPS.PLAYER),this.__spriteRenderer=this.$Sprite.buildForSpriteUrl("shipBullet.png",c,games.shoot.AssetManager)},$prototype:{draw:function(a){this.__spriteRenderer.draw(this.__x,this.__y,a),this.getHitbox().draw(a)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/ShipExplosionBuilder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ship.ShipExplosionBuilder",$extends:"games.common.BaseObject",$dependencies:["games.common.animation.Animation","games.shoot.entity.Explosion","games.shoot.utils.Lol"],$statics:{forXY:function(a,b){return(new games.shoot.ship.ShipExplosionBuilder(a,b)).build()},forPosition:function(a){return games.shoot.ship.ShipExplosionBuilder.forXY(a.getX(),a.getY())},DURATION:15},$constructor:function(a,b){this.$BaseObject.constructor.call(this),this.__x=a,this.__y=b;var c=this.$Lol.ICANHAZ?this.DURATION*4:this.DURATION,d=this.$Lol.ICANHAZ?8:1;this.__animation=new this.$Animation(games.shoot.AssetManager.getAsset("shipExplosionAnimated.png"),64,c,d)},$prototype:{build:function(){return new games.shoot.entity.Explosion(this.__animation,this.__x,this.__y)}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/ShipInputRecorder.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ship.ShipInputRecorder",$extends:"games.common.input.CompositeInputRecorder",$dependencies:["games.common.assert.Assert","games.common.input.DefaultInput","games.shoot.utils.RecorderFactory","aria.utils.Array"],$implements:["games.common.input.InputRecorder"],$statics:{FIRE:"fireBullet",BEAM:"beam",move_LEFT:"left",move_RIGHT:"right",move_UP:"up",move_DOWN:"down"},$constructor:function(a){this.$CompositeInputRecorder.constructor.call(this,[a]),this.__recorder=a},$prototype:{getInputByCode:function(a){var b=this.__translateToDeviceCodes(a);for(var c=0;c<b.length;c++){var d=this.__recorder.getInputByCode(b[c]);if(d)return d}},__translateToDeviceCodes:function(a){return a==this.move_UP?["KEYBOARD_38"]:a==this.move_DOWN?["KEYBOARD_40"]:a==this.move_UP?["KEYBOARD_38"]:a==this.move_LEFT?["KEYBOARD_37"]:a==this.move_RIGHT?["KEYBOARD_39"]:a==this.FIRE?["KEYBOARD_32","KEYBOARD_16"]:a==this.BEAM?["KEYBOARD_88"]:[]}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/ShipMovementEngine.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ship.ShipMovementEngine",$extends:"games.common.BaseObject",$dependencies:["games.common.assert.Assert","games.shoot.entity.engine.ConstantAccelerationEngine"],$constructor:function(a){this.$BaseObject.constructor.call(this),this.__accelerationEngine=new this.$ConstantAccelerationEngine(8*a,a)},$prototype:{update:function(a,b){b.up&&(this.__yspeed<=0||!b.down)?this.__accelerationEngine.goUp(a*b.up):b.down&&(this.__yspeed>=0||!b.up)?this.__accelerationEngine.goDown(a*b.down):this.__accelerationEngine.stopY(),b.left&&(this.__xspeed<=0||!b.right)?this.__accelerationEngine.goLeft(a*b.left):b.right&&(this.__xspeed>=0||!b.left)?this.__accelerationEngine.goRight(a*b.right):this.__accelerationEngine.stopX()},setMaxSpeed:function(a){this.__accelerationEngine.setMaxSpeed(a)},getXSpeed:function(){return this.__accelerationEngine.getXSpeed()},getYSpeed:function(){return this.__accelerationEngine.getYSpeed()}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/ShipPilot.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.shoot.ship.ShipPilot",$extends:"games.common.BaseObject",$dependencies:["games.shoot.ship.ShipInputRecorder","games.shoot.utils.RecorderFactory"],$constructor:function(a){return this.$BaseObject.constructor.call(this),this.ship=a,this.totalTime=0,this.recorder=this.createInputRecorder(),this.recorder.start(),this},$prototype:{update:function(a){var b;return this.totalTime+=a,this.recorder.update(),this.recorder.getInputByCode("fireBullet")?this.ship.fire(a):this.ship.haltFire(a),b={up:this.recorder.getInputByCode("up")?1:0,down:this.recorder.getInputByCode("down")?1:0,left:this.recorder.getInputByCode("left")?1:0,right:this.recorder.getInputByCode("right")?1:0},this.ship.move(a,b)},createInputRecorder:function(){var a;return a=this.$RecorderFactory.getKeyboardRecorder(),new this.$ShipInputRecorder(a)}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ship/TouchShipPilot.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.shoot.ship.TouchShipPilot",$extends:"games.common.BaseObject",$dependencies:["games.shoot.utils.RecorderFactory"],$constructor:function(a){return this.$BaseObject.constructor.call(this),this.ship=a,this.totalTime=0,this.recorder=this.$RecorderFactory.getTouchInputRecorder(),this.recorder.start(),this},$prototype:{update:function(a){var b,c,d;return this.totalTime+=a,this.recorder.update(),c={right:0,left:0,up:0,down:0},d=this.recorder.getInputByCode("TAP"),d?this.ship.fire(a):this.ship.haltFire(a),b=this.recorder.getInputByCode("MOVE"),b&&(b.x>0&&(c.right=1),b.x<0&&(c.left=1),b.y<-5&&(c.down=1),b.y>-5&&(c.up=1)),this.ship.move(a,c)}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/ShootLoader.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.ShootLoader",$extends:"games.common.BaseObject",$dependencies:["games.shoot.controller.loading.LoadingController","games.common.asset.AssetManager","games.shoot.sound.MusicManager","games.shoot.utils.Fullscreen","games.shoot.utils.Environment","aria.utils.Event","games.shoot.controller.level.LevelController","games.shoot.utils.Lol"],$constructor:function(){this.$BaseObject.constructor.call(this),this.createAllCanvas(),games.shoot.AssetManager=this.$AssetManager.getDefaultImplementation(),games.shoot.AssetManager.setRootFolder("resources/img/"),this.__connectKeyboardEvents();var a=new this.$LoadingController(games.shoot.AssetManager,this.__overlayCanvas.getContext("2d"));a.start(),a.$on({complete:{fn:this.__onLoadingControllerCompleted,scope:this}})},$prototype:{createAllCanvas:function(){var a=document.getElementById("gameContainer"),b=this.$Environment.BOARD.WIDTH,c=this.$Environment.BOARD.HEIGHT,d=this.$Environment.BOARD.SCALE;this.__gameCanvas=this.createScaledCanvasInWrapper(b,c,d,a),this.__overlayCanvas=this.createScaledCanvasInWrapper(b,c,d,a)},createScaledCanvas:function(a,b,c){var d=document.createElement("canvas");return d.width=a*c,d.height=b*c,d.getContext("2d").scale(c,c),d},createCanvasContainer:function(){var a=document.createElement("div");return a.className="canvasContainer",a},createScaledCanvasInWrapper:function(a,b,c,d){var e=this.createScaledCanvas(a,b,c),f=this.createCanvasContainer();return f.appendChild(e),d.appendChild(f),e},__connectKeyboardEvents:function(){this.$Event.addListener(document,"keyup",{fn:this.__onKeyUp,scope:this})},__onKeyUp:function(a){a.keyCode==70?this.$Fullscreen.toggleFullscreen():a.keyCode==78&&this.$MusicManager.playNext()},__onLoadingControllerCompleted:function(){(new this.$LevelController(this.__gameCanvas.getContext("2d"),this.__overlayCanvas.getContext("2d"))).start()}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/sound/MusicManager.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.sound.MusicManager",$extends:"games.common.BaseObject",$dependencies:["aria.utils.Event"],$constructor:function(){buzz.defaults.autoplay=!0,buzz.defaults.loop=!0},$statics:{currentTrack:null,trackIndex:-1,urlPrefix:"resources/sounds/",tracks:["machine.ogg","theme.ogg","bubbling.ogg"],playNext:function(){this.currentTrack&&this.currentTrack.unloop().stop();var a=this.__getNextTrackUrl();a?(document.getElementById("playMusicButton").classList.add("activated"),this.currentTrack=new buzz.sound(this.urlPrefix+a,{preload:!0,autoplay:!0,loop:!0})):(document.getElementById("playMusicButton").classList.remove("activated"),this.trackIndex=-1,this.currentTrack=null)},__getNextTrackUrl:function(){return this.tracks[++this.trackIndex]}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/Stats.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.Stats",$extends:"games.common.BaseObject",$dependencies:[],$implements:[],$statics:{KEYS:["loop","draw","update","collide"]},$constructor:function(){this.$BaseObject.constructor.call(this),this.__prepareStatsObject(),this.render()},$prototype:{updateTime:function(a,b){var c=this.stats[a];c.max=this.__format(Math.max(c.max,b)),c.avg=this.__format((c.avg*c.times+b)/++c.times),a=="loop"&&this.__frames++,Date.now()>this.__renderTime+1e3&&(this.render(),this.__resetStats())},updateEntities:function(a){this.__entities=a},render:function(){this.__renderTime=Date.now();for(var a=0;a<this.KEYS.length;a++){var b=this.KEYS[a];this.dom[b].max.innerHTML=this.stats[b].max,this.dom[b].avg.innerHTML=this.stats[b].avg}this.dom.fps.innerHTML=this.__frames,this.dom.entities.innerHTML=this.__entities},__format:function(a){return Math.floor(a*100)/100},__prepareStatsObject:function(){this.__resetStats(),this.dom={};for(var a=0;a<this.KEYS.length;a++){var b=this.KEYS[a];this.dom[b]={max:document.getElementById(b+".max"),avg:document.getElementById(b+".avg")}}this.dom.fps=document.getElementById("fps"),this.dom.entities=document.getElementById("entities")},__resetStats:function(){this.__frames=0,this.__entities=0,this.stats={collide:{max:0,avg:0,times:0},update:{max:0,avg:0,times:0},loop:{max:0,avg:0,times:0},draw:{max:0,avg:0,times:0}}}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/utils/Console.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.shoot.utils.Console",$extends:"games.common.BaseObject",$singleton:!0,$constructor:function(){return this.domElement=document.getElementById("htmlshoot-console"),this},$prototype:{log:function(a){var b;return a="<div>&gt;&nbsp;"+a+"</div>",b=this.domElement.innerHTML,this.domElement.innerHTML=a+b}}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/utils/Environment.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.utils.Environment",$statics:{BOARD:{WIDTH:480,HEIGHT:640,SCALE:1},getEngine:function(){return games.shoot.utils.Environment.__engine},setEngine:function(a){games.shoot.utils.Environment.__engine=a}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/utils/Fullscreen.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.utils.Fullscreen",$extends:"games.common.BaseObject",$statics:{toggleFullscreen:function(){this.isFullscreenOn()?this.disableFullscreen():this.enableFullscreen()},isFullscreenOn:function(){return document.mozFullScreen||document.webkitIsFullScreen},disableFullscreen:function(){try{this.__disableFullscreen()}catch(a){console.log("Fullscreen exception : "+a)}},__disableFullscreen:function(){document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()},enableFullscreen:function(){try{this.__enableFullscreenForDiv(this.__getFullscreenContainer())}catch(a){console.log("Fullscreen exception : "+a)}},__enableFullscreenForDiv:function(a){a.webkitRequestFullScreen?a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):a.mozRequestFullScreen&&a.mozRequestFullScreen()},__getFullscreenContainer:function(){return document.getElementById("gameContainer")}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/utils/GameType.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.utils.GameType",$extends:"games.common.BaseObject",$dependencies:["aria.utils.Type","games.shoot.enemy.EnemyTypes"],$constructor:function(){this.$BaseObject.constructor.call(this)},$statics:{isBullet:function(a){return aria.utils.Type.isInstanceOf(a,"games.shoot.entity.Bullet")},isBeam:function(a){return aria.utils.Type.isInstanceOf(a,"games.shoot.ship.Beam")},isShip:function(a){return aria.utils.Type.isInstanceOf(a,"games.shoot.ship.Ship")},isMagnet:function(a){return aria.utils.Type.isInstanceOf(a,"games.shoot.ship.Magnet")},isBoard:function(a){return aria.utils.Type.isInstanceOf(a,"games.shoot.entity.SpriteBoard")},isExplosion:function(a){return aria.utils.Type.isInstanceOf(a,"games.shoot.entity.Explosion")},isPhysicalEnemy:function(a){return games.shoot.utils.GameType.__instanceOf(a,"games.shoot.enemy.PhysicalEnemy")},isPhysicalEntity:function(a){return a&&a.$interfaces&&typeof a.$interfaces["games.common.entity.PhysicalEntity"]=="function"},isOverlay:function(a){return a&&a.$interfaces&&typeof a.$interfaces["games.shoot.overlay.OverlayEntity"]=="function"},isLoot:function(a){return a&&a.$interfaces&&typeof a.$interfaces["games.shoot.entity.loot.Loot"]=="function"},isPowerUp:function(a){return games.shoot.utils.GameType.__instanceOf(a,"games.shoot.entity.loot.powerup.Power")},isTractable:function(a){return a&&a.$interfaces&&typeof a.$interfaces["games.shoot.entity.TractableEntity"]=="function"},isAirEnemy:function(a){return games.shoot.utils.GameType.isPhysicalEnemy(a)&&a.getType()==games.shoot.enemy.EnemyTypes.AIR},isGroundEnemy:function(a){return games.shoot.utils.GameType.isPhysicalEnemy(a)&&a.getType()==games.shoot.enemy.EnemyTypes.GROUND},__instanceOf:function(a,b){var c=aria.utils.Type.isInstanceOf(a,b),d=a&&a.$interfaces&&typeof a.$interfaces[b]=="function";return c||d}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/utils/Lol.js
//kj0U8ZfQ5x
(function(){Aria.classDefinition({$classpath:"games.shoot.utils.Lol",$singleton:!0,$constructor:function(){return this.ICANHAZ=window.location.href.indexOf("lol")!==-1}})}).call(this);
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/utils/RecorderFactory.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.utils.RecorderFactory",$dependencies:["games.common.input.KeyboardRecorder"],$statics:{getKeyboardRecorder:function(){var a=new games.common.input.KeyboardRecorder;return this.getKeyboardRecorder=function(){return a},this.getKeyboardRecorder()},getTouchInputRecorder:function(){var a=new games.common.input.TouchInputRecorder;return this.getTouchInputRecorder=function(){return a},this.getTouchInputRecorder()}}});
//kj0U8ZfQ5x
//LOGICAL-PATH:games/shoot/utils/Speed.js
//kj0U8ZfQ5x
Aria.classDefinition({$classpath:"games.shoot.utils.Speed",$extends:"games.common.BaseObject",$constructor:function(){this.$BaseObject.constructor.call(this)},$statics:{getSpeedXYForLineTrajectory:function(a,b,c,d,e){var f=c>=a?1:-1,g=d>=b?1:-1,h=Math.abs(c-a),i=Math.abs(d-b);if(h===0)var j=0,k=e;else var l=i/h,j=e/Math.sqrt(1+Math.pow(l,2)),k=j*l;return{x:j*f,y:k*g}}}});